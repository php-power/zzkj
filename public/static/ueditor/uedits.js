UE.I18N['zh-cn']={'labelMap':{'anchor':'批注','undo':'撤销','redo':'重做','bold':'加粗','indent':'首行缩进','snapscreen':'截图','italic':'斜体','underline':'下划线','strikethrough':'删除线','subscript':'下标','fontborder':'字符边框','superscript':'上标','formatmatch':'格式刷','source':'源代码','blockquote':'引用','pasteplain':'纯文本粘贴模式','selectall':'全选','print':'打印','preview':'预览','horizontal':'分隔线','removeformat':'清除格式','time':'时间','date':'日期','unlink':'取消链接','insertrow':'前插入行','insertcol':'前插入列','mergeright':'右合并单元格','mergedown':'下合并单元格','deleterow':'删除行','deletecol':'删除列','splittorows':'拆分成行','splittocols':'拆分成列','splittocells':'完全拆分单元格','deletecaption':'删除表格标题','inserttitle':'插入标题','mergecells':'合并多个单元格','deletetable':'删除表格','cleardoc':'清空文档','insertparagraph':'后面插入段落','insertparagraphbeforetable':"表格前插入行",'insertcode':'代码语言','fontfamily':'字体','fontsize':'字号 10~72px','paragraph':'段落格式','simpleupload':'单图上传','insertimage':'多图上传','edittable':'表格属性','edittd':'单元格属性','link':'超链接','emotion':'表情','spechars':'特殊字符','searchreplace':'查询替换','map':'Baidu地图','gmap':'Google地图','insertvideo':'视频','help':'帮助','justifyleft':'居左对齐','justifyright':'居右对齐','justifycenter':'居中对齐','justifyjustify':'两端对齐','forecolor':'字体颜色','backcolor':'背景色','insertorderedlist':'有序列表','insertunorderedlist':'无序列表','fullscreen':'全屏写稿模式','directionalityltr':'从左向右输入','directionalityrtl':'从右向左输入','rowspacingtop':'段前距','rowspacingbottom':'段后距','pagebreak':'分页','insertframe':'插入Iframe','imagenone':'默认','imageleft':'左浮动','imageright':'右浮动','attachment':'附件','imagecenter':'居中','wordimage':'上传粘贴word内容中的图片','lineheight':'行间距','letterspacing':'字间距','outpadding':'两侧边距','edittip':'编辑提示','customstyle':'自定义标题','autotypeset':'自动排版','webapp':'百度应用','touppercase':'字母大写','tolowercase':'字母小写','background':'背景','template':'模板','scrawl':'涂鸦','music':'音乐','inserttable':'插入表格','drafts':'从草稿箱加载','charts':'图表','isLoading':'正在加载……','isSearching':'正在搜索……','confirmReplace':'正文内容即将替换成模板内容，是否确认？','imgstyle':'图片边框阴影'},'insertorderedlist':{'num':'1,2,3...','num1':'1),2),3)...','num2':'(1),(2),(3)...','cn':'一,二,三....','cn1':'一),二),三)....','cn2':'(一),(二),(三)....','decimal':'1,2,3...','lower-alpha':'a,b,c...','lower-roman':'i,ii,iii...','upper-alpha':'A,B,C...','upper-roman':'I,II,III...'},'insertunorderedlist':{'circle':'○ 大圆圈','disc':'● 小黑点','square':'■ 小方块 ','dash':'— 破折号','dot':' 。 小圆圈'},'paragraph':{'p':'段落','h1':'一级标题','h2':'二级标题','h3':'三级标题','h4':'四级标题','h5':'五级标题','h6':'六级标题'},'fontfamily':{'songti':'宋体','kaiti':'楷体','heiti':'黑体','lishu':'隶书','yahei':'微软雅黑','andaleMono':'andale mono','arial':'arial','arialBlack':'arial black','comicSansMs':'comic sans ms','impact':'impact','timesNewRoman':'times new roman'},'customstyle':{'tc':'标题居中','tl':'标题居左','im':'强调','hi':'明显强调'},'autoupload':{'exceedSizeError':'文件大小超出限制','exceedTypeError':'文件格式不允许','jsonEncodeError':'服务器返回格式错误','loading':"正在上传...",'loadError':"上传错误",'errorLoadConfig':'后端配置项没有正常加载，上传插件不能正常使用！'},'simpleupload':{'exceedSizeError':'文件大小超出限制','exceedTypeError':'文件格式不允许','jsonEncodeError':'服务器返回格式错误','loading':"正在上传...",'loadError':"上传错误",'errorLoadConfig':'后端配置项没有正常加载，上传插件不能正常使用！'},'elementPathTip':"元素路径",'wordCountTip':"字数统计",'wordCountMsg':'当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ','wordOverFlowMsg':'<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>','ok':"确认",'cancel':"取消",'closeDialog':"关闭对话框",'tableDrag':"表格拖动必须引入uiUtils.js文件！",'autofloatMsg':"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",'loadconfigError':'获取后台配置项请求出错，上传功能将不能正常使用！','loadconfigFormatError':'后台配置项返回格式出错，上传功能将不能正常使用！','loadconfigHttpError':'请求后台配置项http错误，上传功能将不能正常使用！','snapScreen_plugin':{'browserMsg':"仅支持IE浏览器！",'callBackErrorMsg':"服务器返回数据有误，请检查配置项之后重试。",'uploadErrorMsg':"截图上传失败，请检查服务器端环境! "},'insertcode':{'as3':'ActionScript 3','bash':'Bash/Shell','cpp':'C/C++','css':'CSS','cf':'ColdFusion','c#':'C#','delphi':'Delphi','diff':'Diff','erlang':'Erlang','groovy':'Groovy','html':'HTML','java':'Java','jfx':'JavaFX','js':'JavaScript','pl':'Perl','php':'PHP','plain':'Plain Text','ps':'PowerShell','python':'Python','ruby':'Ruby','scala':'Scala','sql':'SQL','vb':'Visual Basic','xml':'XML'},'confirmClear':"确定清空当前文档么？",'contextMenu':{'delete':"删除",'selectall':"全选",'deletecode':"删除代码",'cleardoc':"清空文档",'confirmclear':"确定清空当前文档么？",'unlink':"删除超链接",'paragraph':"段落格式",'edittable':"表格属性",'aligntd':"单元格对齐方式",'aligntable':'表格对齐方式','tableleft':'左浮动','tablecenter':'居中显示','tableright':'右浮动','edittd':"单元格属性",'setbordervisible':'设置表格边线可见','justifyleft':'左对齐','justifyright':'右对齐','justifycenter':'居中对齐','justifyjustify':'两端对齐','table':"表格",'inserttable':'插入表格','deletetable':"删除表格",'insertparagraphbefore':"前插入段落",'insertparagraphafter':'后插入段落','deleterow':"删除当前行",'deletecol':"删除当前列",'insertrow':"前插入行",'insertcol':"左插入列",'insertrownext':'后插入行','insertcolnext':'右插入列','insertcaption':'插入表格名称','deletecaption':'删除表格名称','inserttitle':'插入表格标题行','deletetitle':'删除表格标题行','inserttitlecol':'插入表格标题列','deletetitlecol':'删除表格标题列','averageDiseRow':'平均分布各行','averageDisCol':'平均分布各列','mergeright':"向右合并",'mergeleft':"向左合并",'mergedown':"向下合并",'mergecells':"合并单元格",'splittocells':"完全拆分单元格",'splittocols':"拆分成列",'splittorows':"拆分成行",'tablesort':'表格排序','enablesort':'设置表格可排序','disablesort':'取消表格可排序','reversecurrent':'逆序当前','orderbyasc':'按ASCII字符升序','reversebyasc':'按ASCII字符降序','orderbynum':'按数值大小升序','reversebynum':'按数值大小降序','borderbk':'边框底纹','setcolor':'表格隔行变色','unsetcolor':'取消表格隔行变色','setbackground':'选区背景隔行','unsetbackground':'取消选区背景','redandblue':'红蓝相间','threecolorgradient':'三色渐变','copy':"复制(Ctrl + c)",'copymsg':"浏览器不支持,请使用 'Ctrl + c'",'paste':"粘贴(Ctrl + v)",'pastemsg':"浏览器不支持,请使用 'Ctrl + v'"},'copymsg':"浏览器不支持,请使用 'Ctrl + c'",'pastemsg':"浏览器不支持,请使用 'Ctrl + v'",'anthorMsg':"链接",'clearColor':'清空颜色','standardColor':'标准颜色','themeColor':'主题颜色','property':'属性','default':'默认','modify':'修改','justifyleft':'左对齐','justifyright':'右对齐','justifycenter':'居中','justify':'默认','changeImage':'换图','edit':'编辑','radiusCircle':'圆形','imgSquare':'正方形','cancelRadius':'取消圆形','ok':'确定','recentlyColor':'最近使用颜色','clear':'清除','anchorMsg':'锚点','delete':'删除','clickToUpload':"点击上传",'unset':'尚未设置语言文件','t_row':'行','t_col':'列','more':'更多','pasteOpt':'粘贴选项','pasteSourceFormat':"保留源格式",'tagFormat':'只保留标签','pasteTextFormat':'只保留文本','autoTypeSet':{'mergeLine':"合并空行",'delLine':"清除空行",'removeFormat':"清除格式",'indent':"首行缩进",'alignment':"对齐方式",'imageFloat':"图片浮动",'removeFontsize':"清除字号",'removeFontFamily':"清除字体",'removeHtml':"清除冗余HTML代码",'pasteFilter':"粘贴过滤",'run':"执行",'symbol':'符号转换','bdc2sb':'全角转半角','tobdc':'半角转全角'},'background':{'static':{'lang_background_normal':'背景设置','lang_background_local':'在线图片','lang_background_set':'选项','lang_background_none':'无背景色','lang_background_colored':'有背景色','lang_background_color':'颜色设置','lang_background_netimg':'网络图片','lang_background_align':'对齐方式','lang_background_position':'精确定位','repeatType':{'options':["居中","横向重复","纵向重复","平铺","自定义"]}},'noUploadImage':"当前未上传过任何图片！",'toggleSelect':"单击可切换选中状态\n原图尺寸: "},'insertimage':{'static':{'lang_tab_remote':"插入远程图片",'lang_tab_upload':"本地上传",'lang_tab_online':"在线管理",'lang_tab_search':"图片搜索",'lang_input_url':"地 址：",'lang_input_size':"大 小：",'lang_input_width':"宽度",'lang_input_height':"高度",'lang_input_border':"边 框：",'lang_input_vhspace':"边 距：",'lang_input_title':"描 述：",'lang_input_align':'图片浮动方式：','lang_imgLoading':"　图片加载中……",'lang_start_upload':"开始上传",'lock':{'title':"锁定宽高比例"},'searchType':{'title':"图片类型",'options':["新闻","壁纸","表情","头像"]},'searchTxt':{'value':"请输入搜索关键词"},'searchBtn':{'value':"百度一下"},'searchReset':{'value':"清空搜索"},'noneAlign':{'title':'无浮动'},'leftAlign':{'title':'左浮动'},'rightAlign':{'title':'右浮动'},'centerAlign':{'title':'居中独占一行'}},'uploadSelectFile':'点击选择图片','uploadAddFile':'继续添加','uploadStart':'开始上传','uploadPause':'暂停上传','uploadContinue':'继续上传','uploadRetry':'重试上传','uploadDelete':'删除','uploadTurnLeft':'向左旋转','uploadTurnRight':'向右旋转','uploadPreview':'预览中','uploadNoPreview':'不能预览','updateStatusReady':'选中_张图片，共_KB。','updateStatusConfirm':'已成功上传_张照片，_张照片上传失败','updateStatusFinish':'共_张（_KB），_张上传成功','updateStatusError':'，_张上传失败。','errorNotSupport':'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。','errorLoadConfig':'后端配置项没有正常加载，上传插件不能正常使用！','errorExceedSize':'文件大小超出','errorFileType':'文件格式不允许','errorInterrupt':'文件传输中断','errorUploadRetry':'上传失败，请重试','errorHttp':'http请求错误','errorServerUpload':'服务器返回出错','remoteLockError':"宽高不正确,不能所定比例",'numError':"请输入正确的长度或者宽度值！例如：123，400",'imageUrlError':"不允许的图片格式或者图片域！",'imageLoadError':"图片加载失败！请检查链接地址或网络状态！",'searchRemind':"请输入搜索关键词",'searchLoading':"图片加载中，请稍后……",'searchRetry':" :( ，抱歉，没有找到图片！请重试一次！"},'attachment':{'static':{'lang_tab_upload':'上传附件','lang_tab_online':'在线附件','lang_start_upload':"开始上传",'lang_drop_remind':"可以将文件拖到这里，单次最多可选100个文件"},'uploadSelectFile':'点击选择文件','uploadAddFile':'继续添加','uploadStart':'开始上传','uploadPause':'暂停上传','uploadContinue':'继续上传','uploadRetry':'重试上传','uploadDelete':'删除','uploadTurnLeft':'向左旋转','uploadTurnRight':'向右旋转','uploadPreview':'预览中','updateStatusReady':'选中_个文件，共_KB。','updateStatusConfirm':'已成功上传_个文件，_个文件上传失败','updateStatusFinish':'共_个（_KB），_个上传成功','updateStatusError':'，_张上传失败。','errorNotSupport':'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。','errorLoadConfig':'后端配置项没有正常加载，上传插件不能正常使用！','errorExceedSize':'文件大小超出','errorFileType':'文件格式不允许','errorInterrupt':'文件传输中断','errorUploadRetry':'上传失败，请重试','errorHttp':'http请求错误','errorServerUpload':'服务器返回出错'},'insertvideo':{'static':{'lang_tab_insertV':"插入视频",'lang_tab_searchV':"搜索视频",'lang_tab_uploadV':"上传视频/音乐",'lang_video_url':"视频网址",'lang_video_size':"视频尺寸",'lang_videoW':"宽度",'lang_videoH':"高度",'lang_alignment':"对齐方式",'videoSearchTxt':{'value':"请输入搜索关键字！"},'videoType':{'options':["全部","热门","娱乐","搞笑","体育","科技","综艺"]},'videoSearchBtn':{'value':"百度一下"},'videoSearchReset':{'value':"清空结果"},'lang_input_fileStatus':' 当前未上传文件','startUpload':{'style':"background:url(upload.png) no-repeat;"},'lang_upload_size':"视频尺寸",'lang_upload_width':"宽度",'lang_upload_height':"高度",'lang_upload_alignment':"对齐方式",'lang_format_advice':"建议使用mp4格式."},'numError':"请输入正确的数值，如123,400",'floatLeft':"左浮动",'floatRight':"右浮动",'"default"':"默认",'block':"独占一行",'urlError':"输入的视频地址有误，请检查后再试！",'loading':" &nbsp;视频加载中，请等待……",'clickToSelect':"点击选中",'goToSource':'访问源视频','noVideo':" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！",'browseFiles':'浏览文件','uploadSuccess':'上传成功!','delSuccessFile':'从成功队列中移除','delFailSaveFile':'移除保存失败文件','statusPrompt':' 个文件已上传！ ','flashVersionError':'当前Flash版本过低，请更新FlashPlayer后重试！','flashLoadingError':'Flash加载失败!请检查路径或网络状态','fileUploadReady':'等待上传……','delUploadQueue':'从上传队列中移除','limitPrompt1':'单次不能选择超过','limitPrompt2':'个文件！请重新选择！','delFailFile':'移除失败文件','fileSizeLimit':'文件大小超出限制！','emptyFile':'空文件无法上传！','fileTypeError':'文件类型不允许！','unknownError':'未知错误！','fileUploading':'上传中，请等待……','cancelUpload':'取消上传','netError':'网络错误','failUpload':'上传失败!','serverIOError':'服务器IO错误！','noAuthority':'无权限！','fileNumLimit':'上传个数限制','failCheck':'验证失败，本次上传被跳过！','fileCanceling':'取消中，请等待……','stopUploading':'上传已停止……','uploadSelectFile':'点击选择文件','uploadAddFile':'继续添加','uploadStart':'开始上传','uploadPause':'暂停上传','uploadContinue':'继续上传','uploadRetry':'重试上传','uploadDelete':'删除','uploadTurnLeft':'向左旋转','uploadTurnRight':'向右旋转','uploadPreview':'预览中','updateStatusReady':'选中_个文件，共_KB。','updateStatusConfirm':'成功上传_个，_个失败','updateStatusFinish':'共_个(_KB)，_个成功上传','updateStatusError':'，_张上传失败。','errorNotSupport':'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。','errorLoadConfig':'后端配置项没有正常加载，上传插件不能正常使用！','errorExceedSize':'文件大小超出','errorFileType':'文件格式不允许','errorInterrupt':'文件传输中断','errorUploadRetry':'上传失败，请重试','errorHttp':'http请求错误','errorServerUpload':'服务器返回出错'},'webapp':{'tip1':"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",'tip2':"申请完成之后请至ueditor.config.js中配置获得的appkey! ",'applyFor':"点此申请",'anthorApi':"百度API"},'template':{'static':{'lang_template_bkcolor':'背景颜色','lang_template_clear':'保留原有内容','lang_template_select':'选择模板'},'blank':"空白文档",'blog':"博客文章",'resume':"个人简历",'richText':"图文混排",'sciPapers':"科技论文"},'scrawl':{'static':{'lang_input_previousStep':"上一步",'lang_input_nextsStep':"下一步",'lang_input_clear':'清空','lang_input_addPic':'添加背景','lang_input_ScalePic':'缩放背景','lang_input_removePic':'删除背景','J_imgTxt':{title:'添加背景图片'}},'noScarwl':"尚未作画，白纸一张~",'scrawlUpLoading':"涂鸦上传中,别急哦~",'continueBtn':"继续",'imageError':"糟糕，图片读取失败了！",'backgroundUploading':'背景图片上传中,别急哦~'},'music':{'static':{'lang_input_tips':"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",'J_searchBtn':{value:'搜索歌曲'}},'emptyTxt':'未搜索到相关音乐结果，请换一个关键词试试。','chapter':'歌曲','singer':'歌手','special':'专辑','listenTest':'试听'},'anchor':{'static':{'lang_input_anchorName':'锚点名字：'}},'charts':{'static':{'lang_data_source':'数据源：','lang_chart_format':'图表格式：','lang_data_align':'数据对齐方式','lang_chart_align_same':'数据源与图表X轴Y轴一致','lang_chart_align_reverse':'数据源与图表X轴Y轴相反','lang_chart_title':'图表标题','lang_chart_main_title':'主标题：','lang_chart_sub_title':'子标题：','lang_chart_x_title':'X轴标题：','lang_chart_y_title':'Y轴标题：','lang_chart_tip':'提示文字','lang_cahrt_tip_prefix':'提示文字前缀：','lang_cahrt_tip_description':'仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀','lang_chart_data_unit':'数据单位','lang_chart_data_unit_title':'单位：','lang_chart_data_unit_description':'显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃','lang_chart_type':'图表类型：','lang_prev_btn':'上一个','lang_next_btn':'下一个'}},'emotion':{'static':{'lang_input_choice':'精选','lang_input_Tuzki':'兔斯基','lang_input_BOBO':'BOBO','lang_input_lvdouwa':'绿豆蛙','lang_input_babyCat':'baby猫','lang_input_bubble':'泡泡','lang_input_youa':'有啊'}},'gmap':{'static':{'lang_input_address':'地址','lang_input_search':'搜索','address':{value:"北京"}},searchError:'无法定位到该地址!'},'help':{'static':{'lang_input_about':'关于UEditor','lang_input_shortcuts':'快捷键','lang_input_introduction':'UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。','lang_Txt_shortcuts':'快捷键','lang_Txt_func':'功能','lang_Txt_bold':'给选中字设置为加粗','lang_Txt_copy':'复制选中内容','lang_Txt_cut':'剪切选中内容','lang_Txt_Paste':'粘贴','lang_Txt_undo':'重新执行上次操作','lang_Txt_redo':'撤销上一次操作','lang_Txt_italic':'给选中字设置为斜体','lang_Txt_underline':'给选中字加下划线','lang_Txt_selectAll':'全部选中','lang_Txt_visualEnter':'软回车','lang_Txt_fullscreen':'全屏'}},'insertframe':{'static':{'lang_input_address':'地址：','lang_input_width':'宽度：','lang_input_height':'高度：','lang_input_isScroll':'允许滚动条：','lang_input_frameborder':'显示框架边框：','lang_input_alignMode':'对齐方式：','align':{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},'enterAddress':'请输入地址!'},'link':{'static':{'lang_input_text':'文本内容：','lang_input_url':'链接地址：','lang_input_title':'标题：','lang_input_target':'是否在新窗口打开：'},'validLink':'只支持选中一个链接时生效','httpPrompt':'您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀'},'map':{'static':{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索",lang_dynamicmap:"插入动态地图"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},'searchreplace':{'static':{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_searchReg:'支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”',lang_searchReg1:'支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”',lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},'snapscreen':{'static':{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},'spechars':{'static':{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",yyyb:"英语音标",zyzf:"其他"},'edittable':{'static':{'lang_tableStyle':'表格样式','lang_insertCaption':'添加表格名称行','lang_insertTitle':'添加表格标题行','lang_insertTitleCol':'添加表格标题列','lang_orderbycontent':"使表格内容可排序",'lang_tableSize':'自动调整表格尺寸','lang_autoSizeContent':'按表格文字自适应','lang_autoSizePage':'按页面宽度自适应','lang_example':'示例','lang_borderStyle':'表格边框','lang_color':'颜色:'},captionName:'表格名称',titleName:'标题',cellsName:'内容',errorMsg:'有合并单元格，不可排序'},'edittip':{'static':{lang_delRow:'删除整行',lang_delCol:'删除整列'}},'edittd':{'static':{lang_tdBkColor:'背景颜色:'}},'formula':{'static':{}},'wordimage':{'static':{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片,然后点击“开始上传”，最后点击底部的确定。"},'fileType':"图片",'flashError':"FLASH初始化失败，请检查FLASH插件是否正确安装！",'netError':"网络连接错误，请重试！",'copySuccess':"图片地址已经复制！",'flashI18n':{}},'autosave':{'saving':'保存中...','success':'本地保存成功'}};;

jQuery(function($){$.jslanguage={selectAll:'全选',noSelect:'没有选中项',confirm_trash:'您确认要删除数据到回收站吗？',confirm_delete:'您确认要彻底删除数据吗？',confirm_restore:'您确认要从回收站恢复数据吗？',confirm_publish:'您确认要发布这些数据吗？',confirm_batchEdit:'批量修改将会修改您选择的所有行的值，您确认要进行批量修改吗？',confirm_unpublish:'您确认要使这些发布的数据下线吗？',cancel_fav_confirm:'您确认要取消收藏这条数据吗？',needlogin:'登录',sure_delete:'您确认要删除数据吗？',dayNames:['星期日','星期一','星期二','星期三','星期四','星期五','星期六'],dayNamesShort:['周日','周一','周二','周三','周四','周五','周六'],dayNamesMin:['日','一','二','三','四','五','六'],weekHeader:'周',dateFormat:'yy-mm-dd',firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:'',noSelect:'没有选中项',wysiswyg_mode:'不能在查看源代码时插入',select_editor:'请先在编辑器中选择要插入的位置',insert_portlet:'插入portlet',use_editor:'使用编辑器',destory_editor:'注销编辑器'};if(typeof $.validator!='undefined'){$.extend($.validator,{messages:{required:"此项必填，不允许为空。",remote:"请检查输入.",email:"请输入有效的邮箱地址",url:"请输入有效的网址",date:"请输入有效的日期",dateISO:"请输入有效的ISO日期",number:"请输入有效的数字",digits:"只允许输入整数",creditcard:"请输入有效的信用卡.",equalTo:"请输入相同的值.",maxlength:$.validator.format("最多输入{0}字符"),minlength:$.validator.format("最少输入{0}字符"),rangelength:$.validator.format("输入内容在{0} ~ {1} 字符"),range:$.validator.format("输入值允许范围为 {0} ~ {1}"),max:$.validator.format("输入值不能大于{0}."),min:$.validator.format("输入值不能小于 {0}.")},});};if(typeof $.tools!='undefined'&&typeof $.tools.validator!='undefined'){$.tools.validator.localize("zh",{'*':'请检查输入格式是否正确',':email':'请输入有效的邮箱地址。',':number':'请输入有效的数字。',':url':'请输入有效的网址。','[max]':'最大值不大于$1','[min]':'最小值不小于$1','[required]':'此项必填，不允许为空。'});}});;

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setMilliseconds(t.getMilliseconds()+days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{},cookies=document.cookie?document.cookie.split('; '):[],i=0,l=cookies.length;for(;i<l;i++){var parts=cookies[i].split('='),name=decode(parts.shift()),cookie=parts.join('=');if(key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));;
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.12
 *
 * Requires: jQuery 1.2.2+
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});;

!function(){function tinycolor(color,opts){if(color=color?color:"",opts=opts||{},color instanceof tinycolor)return color;if(!(this instanceof tinycolor))return new tinycolor(color,opts);var rgb=inputToRGB(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format,this._gradientType=opts.gradientType,this._r<1&&(this._r=mathRound(this._r)),this._g<1&&(this._g=mathRound(this._g)),this._b<1&&(this._b=mathRound(this._b)),this._ok=rgb.ok,this._tc_id=tinyCounter++}function inputToRGB(color){var rgb={r:0,g:0,b:0},a=1,ok=!1,format=!1;return"string"==typeof color&&(color=stringInputToObject(color)),"object"==typeof color&&(color.hasOwnProperty("r")&&color.hasOwnProperty("g")&&color.hasOwnProperty("b")?(rgb=rgbToRgb(color.r,color.g,color.b),ok=!0,format="%"===String(color.r).substr(-1)?"prgb":"rgb"):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("v")?(color.s=convertToPercentage(color.s),color.v=convertToPercentage(color.v),rgb=hsvToRgb(color.h,color.s,color.v),ok=!0,format="hsv"):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("l")&&(color.s=convertToPercentage(color.s),color.l=convertToPercentage(color.l),rgb=hslToRgb(color.h,color.s,color.l),ok=!0,format="hsl"),color.hasOwnProperty("a")&&(a=color.a)),a=boundAlpha(a),{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a}}function rgbToRgb(r,g,b){return{r:255*bound01(r,255),g:255*bound01(g,255),b:255*bound01(b,255)}}function rgbToHsl(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,l:l}}function hslToRgb(h,s,l){function hue2rgb(p,q,t){return 0>t&&(t+=1),t>1&&(t-=1),1/6>t?p+6*(q-p)*t:.5>t?q:2/3>t?p+6*(q-p)*(2/3-t):p}var r,g,b;if(h=bound01(h,360),s=bound01(s,100),l=bound01(l,100),0===s)r=g=b=l;else{var q=.5>l?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return{r:255*r,g:255*g,b:255*b}}function rgbToHsv(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),v=max,d=max-min;if(s=0===max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,v:v}}function hsvToRgb(h,s,v){h=6*bound01(h,360),s=bound01(s,100),v=bound01(v,100);var i=math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:255*r,g:255*g,b:255*b}}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)?hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0):hex.join("")}function rgbaToHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join("")}function desaturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s-=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function saturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s+=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function greyscale(color){return tinycolor(color).desaturate(100)}function lighten(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l+=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function brighten(color,amount){amount=0===amount?0:amount||10;var rgb=tinycolor(color).toRgb();return rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100)))),rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100)))),rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100)))),tinycolor(rgb)}function darken(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l-=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function spin(color,amount){var hsl=tinycolor(color).toHsl(),hue=(mathRound(hsl.h)+amount)%360;return hsl.h=0>hue?360+hue:hue,tinycolor(hsl)}function complement(color){var hsl=tinycolor(color).toHsl();return hsl.h=(hsl.h+180)%360,tinycolor(hsl)}function triad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})]}function tetrad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})]}function splitcomplement(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})]}function analogous(color,results,slices){results=results||6,slices=slices||30;var hsl=tinycolor(color).toHsl(),part=360/slices,ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;)hsl.h=(hsl.h+part)%360,ret.push(tinycolor(hsl));return ret}function monochromatic(color,results){results=results||6;for(var hsv=tinycolor(color).toHsv(),h=hsv.h,s=hsv.s,v=hsv.v,ret=[],modification=1/results;results--;)ret.push(tinycolor({h:h,s:s,v:v})),v=(v+modification)%1;return ret}function flip(o){var flipped={};for(var i in o)o.hasOwnProperty(i)&&(flipped[o[i]]=i);return flipped}function boundAlpha(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function bound01(n,max){isOnePointZero(n)&&(n="100%");var processPercent=isPercentage(n);return n=mathMin(max,mathMax(0,parseFloat(n))),processPercent&&(n=parseInt(n*max,10)/100),math.abs(n-max)<1e-6?1:n%max/parseFloat(max)}function clamp01(val){return mathMin(1,mathMax(0,val))}function parseIntFromHex(val){return parseInt(val,16)}function isOnePointZero(n){return"string"==typeof n&&-1!=n.indexOf(".")&&1===parseFloat(n)}function isPercentage(n){return"string"==typeof n&&-1!=n.indexOf("%")}function pad2(c){return 1==c.length?"0"+c:""+c}function convertToPercentage(n){return 1>=n&&(n=100*n+"%"),n}function convertDecimalToHex(d){return Math.round(255*parseFloat(d)).toString(16)}function convertHexToDecimal(h){return parseIntFromHex(h)/255}function stringInputToObject(color){color=color.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var named=!1;if(names[color])color=names[color],named=!0;else if("transparent"==color)return{r:0,g:0,b:0,a:0,format:"name"};var match;return(match=matchers.rgb.exec(color))?{r:match[1],g:match[2],b:match[3]}:(match=matchers.rgba.exec(color))?{r:match[1],g:match[2],b:match[3],a:match[4]}:(match=matchers.hsl.exec(color))?{h:match[1],s:match[2],l:match[3]}:(match=matchers.hsla.exec(color))?{h:match[1],s:match[2],l:match[3],a:match[4]}:(match=matchers.hsv.exec(color))?{h:match[1],s:match[2],v:match[3]}:(match=matchers.hsva.exec(color))?{h:match[1],s:match[2],v:match[3],a:match[4]}:(match=matchers.hex8.exec(color))?{a:convertHexToDecimal(match[1]),r:parseIntFromHex(match[2]),g:parseIntFromHex(match[3]),b:parseIntFromHex(match[4]),format:named?"name":"hex8"}:(match=matchers.hex6.exec(color))?{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"}:(match=matchers.hex3.exec(color))?{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),format:named?"name":"hex"}:!1}function validateWCAG2Parms(parms){var level,size;return parms=parms||{level:"AA",size:"small"},level=(parms.level||"AA").toUpperCase(),size=(parms.size||"small").toLowerCase(),"AA"!==level&&"AAA"!==level&&(level="AA"),"small"!==size&&"large"!==size&&(size="small"),{level:level,size:size}}var trimLeft=/^\s+/,trimRight=/\s+$/,tinyCounter=0,math=Math,mathRound=math.round,mathMin=math.min,mathMax=math.max,mathRandom=math.random;tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var rgb=this.toRgb();return(299*rgb.r+587*rgb.g+114*rgb.b)/1e3},getLuminance:function(){var RsRGB,GsRGB,BsRGB,R,G,B,rgb=this.toRgb();return RsRGB=rgb.r/255,GsRGB=rgb.g/255,BsRGB=rgb.b/255,R=.03928>=RsRGB?RsRGB/12.92:Math.pow((RsRGB+.055)/1.055,2.4),G=.03928>=GsRGB?GsRGB/12.92:Math.pow((GsRGB+.055)/1.055,2.4),B=.03928>=BsRGB?BsRGB/12.92:Math.pow((BsRGB+.055)/1.055,2.4),.2126*R+.7152*G+.0722*B},setAlpha:function(value){return this._a=boundAlpha(value),this._roundA=mathRound(100*this._a)/100,this},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:360*hsv.h,s:hsv.s,v:hsv.v,a:this._a}},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b),h=mathRound(360*hsv.h),s=mathRound(100*hsv.s),v=mathRound(100*hsv.v);return 1==this._a?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")"},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:360*hsl.h,s:hsl.s,l:hsl.l,a:this._a}},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b),h=mathRound(360*hsl.h),s=mathRound(100*hsl.s),l=mathRound(100*hsl.l);return 1==this._a?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")"},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char)},toHexString:function(allow3Char){return"#"+this.toHex(allow3Char)},toHex8:function(){return rgbaToHex(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:mathRound(100*bound01(this._r,255))+"%",g:mathRound(100*bound01(this._g,255))+"%",b:mathRound(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+mathRound(100*bound01(this._r,255))+"%, "+mathRound(100*bound01(this._g,255))+"%, "+mathRound(100*bound01(this._b,255))+"%)":"rgba("+mathRound(100*bound01(this._r,255))+"%, "+mathRound(100*bound01(this._g,255))+"%, "+mathRound(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function(secondColor){var hex8String="#"+rgbaToHex(this._r,this._g,this._b,this._a),secondHex8String=hex8String,gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String=s.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")"},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=!1,hasAlpha=this._a<1&&this._a>=0,needsAlphaFormat=!formatSet&&hasAlpha&&("hex"===format||"hex6"===format||"hex3"===format||"name"===format);return needsAlphaFormat?"name"===format&&0===this._a?this.toName():this.toRgbString():("rgb"===format&&(formattedString=this.toRgbString()),"prgb"===format&&(formattedString=this.toPercentageRgbString()),("hex"===format||"hex6"===format)&&(formattedString=this.toHexString()),"hex3"===format&&(formattedString=this.toHexString(!0)),"hex8"===format&&(formattedString=this.toHex8String()),"name"===format&&(formattedString=this.toName()),"hsl"===format&&(formattedString=this.toHslString()),"hsv"===format&&(formattedString=this.toHsvString()),formattedString||this.toHexString())},clone:function(){return tinycolor(this.toString())},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));return this._r=color._r,this._g=color._g,this._b=color._b,this.setAlpha(color._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}},tinycolor.fromRatio=function(color,opts){if("object"==typeof color){var newColor={};for(var i in color)color.hasOwnProperty(i)&&(newColor[i]="a"===i?color[i]:convertToPercentage(color[i]));color=newColor}return tinycolor(color,opts)},tinycolor.equals=function(color1,color2){return color1&&color2?tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString():!1},tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()})},tinycolor.mix=function(color1,color2,amount){amount=0===amount?0:amount||50;var w1,rgb1=tinycolor(color1).toRgb(),rgb2=tinycolor(color2).toRgb(),p=amount/100,w=2*p-1,a=rgb2.a-rgb1.a;w1=-1==w*a?w:(w+a)/(1+w*a),w1=(w1+1)/2;var w2=1-w1,rgba={r:rgb2.r*w1+rgb1.r*w2,g:rgb2.g*w1+rgb1.g*w2,b:rgb2.b*w1+rgb1.b*w2,a:rgb2.a*p+rgb1.a*(1-p)};return tinycolor(rgba)},tinycolor.readability=function(color1,color2){var c1=tinycolor(color1),c2=tinycolor(color2);return(Math.max(c1.getLuminance(),c2.getLuminance())+.05)/(Math.min(c1.getLuminance(),c2.getLuminance())+.05)},tinycolor.isReadable=function(color1,color2,wcag2){var wcag2Parms,out,readability=tinycolor.readability(color1,color2);switch(out=!1,wcag2Parms=validateWCAG2Parms(wcag2),wcag2Parms.level+wcag2Parms.size){case"AAsmall":case"AAAlarge":out=readability>=4.5;break;case"AAlarge":out=readability>=3;break;case"AAAsmall":out=readability>=7}return out},tinycolor.mostReadable=function(baseColor,colorList,args){var readability,includeFallbackColors,level,size,bestColor=null,bestScore=0;args=args||{},includeFallbackColors=args.includeFallbackColors,level=args.level,size=args.size;for(var i=0;i<colorList.length;i++)readability=tinycolor.readability(baseColor,colorList[i]),readability>bestScore&&(bestScore=readability,bestColor=tinycolor(colorList[i]));return tinycolor.isReadable(baseColor,bestColor,{level:level,size:size})||!includeFallbackColors?bestColor:(args.includeFallbackColors=!1,tinycolor.mostReadable(baseColor,["#fff","#000"],args))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names),matchers=function(){var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")",PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";return{rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=tinycolor:"function"==typeof define&&define.amd?define(function(){return tinycolor}):window.tinycolor=tinycolor}();;

var random_color_step=1;var custom_style_set=false;var current_edit_img=null;var allow_upload_img=null;var current_edit_msg_id='';var current_editor;var replace_full_color=false;var replace_clear_interval=null;function strip_stack_span(html){var docObj=jQuery('<div>'+html+'</div>');var outers=docObj.find('[data-role=outer],[label*=135editor]');for(var i=outers.length-1;i>0;i--){var $this=outers.eq(i);if($this.get(0).style.backgroundColor&&$this.get(0).style.backgroundColor!=""||$this.css('background-image')&&$this.css('background-image')!='none'){$this.removeAttr('class');$this.removeAttr('label');}
else{$this.replaceWith($this.html());}}
docObj.find('li,colgroup,a').each(function(){if(jQuery.trim(jQuery(this).text())==""&&jQuery(this).find('img').size()==0){jQuery(this).remove();}});var has_secspan=false;do
{has_secspan=false;docObj.find('span:has(span)').each(function(i){var innerobj=jQuery(this).find('> span');if(innerobj.size()>1){jQuery(this).find('span').each(function(){if(jQuery.trim(jQuery(this).text())==""){jQuery(this).replaceWith(jQuery(this).html());}});return;}
else if(innerobj.size()==0){return;}
if(jQuery.trim(jQuery(this).text())==jQuery.trim(innerobj.text())){has_secspan=true;var style=jQuery(this).attr('style');var innserstyle=innerobj.attr('style');var newStyle='';if(style&&style!=""){newStyle+=';'+style;}
if(innserstyle&&innserstyle!=""){newStyle+=';'+innserstyle;}
var new_html='';jQuery(this).find('> *').each(function(){if(this.tagName=="SPAN"){new_html+=jQuery(innerobj).html();}
else{new_html+=jQuery(this).prop('outerHTML');}});jQuery(this).attr('style',newStyle).html(new_html);}});}while(has_secspan);return docObj.html();}
function strip_tags(input,allowed){allowed=(((allowed||'')+'').toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join('');var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return input.replace(commentsAndPhpTags,'').replace(tags,function($0,$1){return allowed.indexOf('<'+$1.toLowerCase()+'>')>-1?$0:'';});}
function htmlspecialchars_decode(string,quote_style){var optTemp=0,i=0,noquotes=false;if(typeof quote_style==='undefined'){quote_style=2;}
string=string.toString().replace(/&lt;/g,'<').replace(/&gt;/g,'>');var OPTS={'ENT_NOQUOTES':0,'ENT_HTML_QUOTE_SINGLE':1,'ENT_HTML_QUOTE_DOUBLE':2,'ENT_COMPAT':2,'ENT_QUOTES':3,'ENT_IGNORE':4};if(quote_style===0){noquotes=true;}
if(typeof quote_style!=='number'){quote_style=[].concat(quote_style);for(i=0;i<quote_style.length;i++){if(OPTS[quote_style[i]]===0){noquotes=true;}else if(OPTS[quote_style[i]]){optTemp=optTemp|OPTS[quote_style[i]];}}
quote_style=optTemp;}
if(quote_style&OPTS.ENT_HTML_QUOTE_SINGLE){string=string.replace(/&#0*39;/g,"'");}
if(!noquotes){string=string.replace(/&quot;/g,'"');}
string=string.replace(/&amp;/g,'&');return string;}
function strip_imgthumb_opr(imgurl){var idx=imgurl.indexOf('@');if(idx>0){imgurl=imgurl.substring(0,idx);}
var idy=imgurl.indexOf('?');if(idy>0){imgurl=imgurl.substring(0,idy);}
return imgurl;}
function base64_decode(data){var b64='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,dec='',tmp_arr=[];if(!data){return data;}
data+='';do{h1=b64.indexOf(data.charAt(i++));h2=b64.indexOf(data.charAt(i++));h3=b64.indexOf(data.charAt(i++));h4=b64.indexOf(data.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){tmp_arr[ac++]=String.fromCharCode(o1);}else if(h4==64){tmp_arr[ac++]=String.fromCharCode(o1,o2);}else{tmp_arr[ac++]=String.fromCharCode(o1,o2,o3);}}while(i<data.length);dec=tmp_arr.join('');return decodeURIComponent(escape(dec.replace(/\0+$/,'')));}
function base64_encode(data){var b64='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc='',tmp_arr=[];if(!data){return data;}
data=unescape(encodeURIComponent(data));do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);}while(i<data.length);enc=tmp_arr.join('');var r=data.length%3;return(r?enc.slice(0,r-3):enc)+'==='.slice(r||3);}
function str_replace(search,replace,subject,count){var i=0,j=0,temp='',repl='',sl=0,fl=0,f=[].concat(search),r=[].concat(replace),s=subject,ra=Object.prototype.toString.call(r)==='[object Array]',sa=Object.prototype.toString.call(s)==='[object Array]';s=[].concat(s);if(count){this.window[count]=0;}
for(i=0,sl=s.length;i<sl;i++){if(s[i]===''){continue;}
for(j=0,fl=f.length;j<fl;j++){temp=s[i]+'';repl=ra?(r[j]!==undefined?r[j]:''):r[0];s[i]=(temp).split(f[j]).join(repl);if(count&&s[i]!==temp){this.window[count]+=(temp.length-s[i].length)/f[j].length;}}}
return sa?s:s[0];}
function getSelectionHtml(outer){var range=current_editor.selection.getRange();if(range.startContainer.tagName=='BODY'&&range.startContainer===range.endContainer&&range.endOffset>0&&range.endOffset===range.startContainer.childNodes.length){return getEditorHtml(outer);}
else{range.select();var selectionObj=current_editor.selection.getNative();var rangeObj=selectionObj.getRangeAt(0);var docFragment=rangeObj.cloneContents();var testDiv=document.createElement("div");testDiv.appendChild(docFragment);var selectHtml=testDiv.innerHTML;if(selectHtml==""){return"";}
else{return parse135EditorHtml(selectHtml);}}}
function getDealingHtml(){var html=getSelectionHtml(true);if(html==""){if(current_editor.currentActive135Item()){return jQuery(current_editor.currentActive135Item()).html();}
else{return getEditorHtml(true);}}
else{return html;}}
function setDealingHtml(newHtml){newHtml=jQuery.trim(newHtml);var html=getSelectionHtml();if(html!=""){insertHtml(newHtml);custom_style_set=true;current_editor.undoManger.save();return;}
else if(current_editor.currentActive135Item()){jQuery(current_editor.currentActive135Item()).html(newHtml);current_editor.undoManger.save();return;}
else{current_editor.setContent(newHtml);current_editor.undoManger.save();return;}}
function parse135EditorHtml(html,outer_falg){var htmlObj=jQuery('<div>'+html+' </div>');htmlObj.find('*').each(function(){if(this.style.transform){setElementTransform(this,this.style.transform);return;}
if(this.tagName=="SECTION"){var style=jQuery(this).attr('style');if(style){style=style.toLowerCase();if(style.indexOf('box-sizing')>=0){return;}
else if(style.indexOf('padding')>=0||style.indexOf('border')>=0){jQuery(this).css('box-sizing','border-box');}}}
else if(this.tagName=="IMG"||this.tagName=="BR"||this.tagName=="TSPAN"||this.tagName=="TEXT"||this.tagName=="IMAGE"){return;}
else if(this.tagName=="STRONG"||this.tagName=="SPAN"||this.tagName=="B"||this.tagName=="EM"||this.tagName=="I"){return;}
else if(this.tagName=="P"){return;}
else if(this.tagName=="H1"||this.tagName=="H2"||this.tagName=="H3"||this.tagName=="H4"||this.tagName=="H5"||this.tagName=="H6"){jQuery(this).css('font-weight','bold');if(!this.style.fontSize){jQuery(this).css({'font-size':'16px'});}
if(!this.style.lineHeight){jQuery(this).css({'lineHeight':'1.6em'});}
return;}
else if(this.tagName=="OL"||this.tagName=="UL"||this.tagName=="DL"){jQuery(this).css({'margin':'0px','padding':'0 0 0 30px'});return;}
if((this.tagName=="TD"||this.tagName=="TH")&&this.style.padding==""&&this.style.paddingLeft==""&&this.style.paddingRight==""&&this.style.paddingTop==""&&this.style.paddingBottom==""){jQuery(this).css({'margin':'5px 10px'});}});var html=jQuery.trim(htmlObj.html());if(html==""){return"";}
return html;}
function setElementTransform(dom,transform){if(transform=="none")return;var sty=jQuery(dom).attr('style');sty=sty.replace(/;\s*transform\s*:[A-Za-z0-9_%,.\-\(\)\s]*;/gim,';');sty=sty.replace(/\s*\-[a-z]+\-transform\s*:[A-Za-z0-9_%,.\-\(\)\s]*;/gim,'');sty=sty+';transform: '+transform+';-webkit-transform: '+transform+';-moz-transform: '+transform+';-ms-transform: '+transform+';-o-transform: '+transform+';';sty=sty.replace(';;',';');jQuery(dom).attr('style',sty);}
function parseMmbizUrl(html){html=html.replace(/https:\/mmbiz./g,'https://mmbiz.');html=html.replace(/http:\/\/mmbiz.qlogo.cn/g,'https://mmbiz.qpic.cn');html=html.replace(/http:\/\/mmbiz.qpic.cn/g,'https://mmbiz.qpic.cn');return html;}
function setEditorHtml(newHtml){newHtml=strip_stack_span(newHtml);current_editor.undoManger.save();current_editor.setContent(newHtml);current_editor.undoManger.save();}
function insertHtml(html,rules){html=current_editor.parseInsertPasteSetHtml(html);var select_html=jQuery.trim(getSelectionHtml(true));if(select_html!=""){if(rules){var select_obj=jQuery('<div>'+select_html+'</div>');select_obj.find('*').each(function(){jQuery(this).removeAttr('style');jQuery(this).removeAttr('class');jQuery(this).removeAttr('placeholder');});for(var i in rules['replace']){select_obj.find(i).each(function(){if(!rules['replace'][i]||rules['replace'][i]==""){jQuery(this).replaceWith(jQuery(this).html());}
else{jQuery(this).replaceWith('<'+rules['replace'][i]+'>'+jQuery(this).html()+'</'+rules['replace'][i]+'>');}});}
for(var i in rules['attributes']){select_obj.find(i).attr(rules['attributes'][i]);}
for(var i in rules.style){select_obj.find(i).attr('style',rules.style[i]);}
for(var i in rules['class']){select_obj.find(i).attr('class',rules['class'][i]);}
for(var i in rules['css']){select_obj.find(i).css(rules['css'][i]);}
html=select_obj.html();current_editor.execCommand('insertHtml',html);if(current_editor.getOpt('open_editor')){current_editor.fireEvent("catchRemoteImage");}
current_editor.undoManger.save();return true;}
select_html=strip_tags(select_html,'<br><p><h1><h2><h3><h4><h5><h6><img>');var select_obj=jQuery('<div>'+select_html+'</div>');select_obj.find('.assistant').remove();select_obj.find('*').each(function(){jQuery(this).removeAttr('style');jQuery(this).removeAttr('class');jQuery(this).removeAttr('placeholder');});var obj=jQuery('<div>'+html+'</div>');obj.find('> ._135editor').siblings('p').each(function(i){if(jQuery(this).html()==""||jQuery(this).html()=="&nbsp;"||jQuery(this).html()=="<br>"||jQuery(this).html()=="<br/>"){if(typeof jQuery(this).attr('style')=='undefined'){jQuery(this).remove();}}});select_obj.find('h1,h2,h3,h4,h5,h6').each(function(i){var title=obj.find('.135title').eq(i);if(title&&title.size()>0){title.html(jQuery.trim(jQuery(this).text()));jQuery(this).remove();}
else{jQuery(this).replaceWith('<p>'+jQuery(this).text()+'</p>');}});select_obj.find('img').each(function(i){var bgimg=obj.find('.135bg').eq(i);if(bgimg&&bgimg.size()>0){bgimg.css('background-image','url('+jQuery(this).attr('src')+')');jQuery(this).remove();}});var img_i=0;select_obj.find('img').each(function(){var img=obj.find('img').eq(img_i);while(img.hasClass('assistant')){img_i++;img=obj.find('img').eq(img_i);}
if(img&&img.size()>0&&jQuery(img).parents('.135brush').size()==0){img.attr('src',jQuery(this).attr('src'));if(img.parent().attr('data-role')=='circle'||img.parent().attr('data-role')=='square'||img.parent().attr('data-role')=='bgmirror'){img.parent().css('backgroundImage','url('+jQuery(this).attr('src')+')');}
img_i++;jQuery(this).remove();}});select_obj.find('img').each(function(i){var img=obj.find('image').eq(i);if(img&&img.size()>0){img.attr('xlink:href',jQuery(this).attr('src'));jQuery(this).remove();}});var brushs=obj.find('.135brush');var total=brushs.size();if(total>0){if(total==1){var brush_item=obj.find('.135brush:first');if(brush_item.data('brushtype')=='text'){brush_item.html(jQuery.trim(select_obj.text()));}
else{select_obj.contents().each(function(i){var $this=this;if(this.tagName=="IMG"){return;};if(jQuery.trim(jQuery($this).text())==""||this.tagName=='BR'||jQuery(this).html()==""||jQuery(this).html()=="&nbsp;"||jQuery(this).html()=="<br>"||jQuery(this).html()=="<br/>"){jQuery(this).remove();}});var style=brush_item.data('style');if(style){select_obj.find('*').each(function(){jQuery(this).attr('style',style);});}
var html=select_obj.html();if(html!=""){brush_item.html(html);}}}
else{select_obj.contents().each(function(i){var $this=this;if($this.nodeType==3){$this=jQuery('<p>'+jQuery(this).text()+'</p>').get(0);}
if(i<total){var brush_item=brushs.eq(i);if(brush_item.data('brushtype')=='text'){brush_item.html(jQuery.trim(jQuery($this).text()));}
else{var style=brush_item.data('style');if(style){jQuery($this).attr('style',style);}
brush_item.empty().append(jQuery($this));}}
else{var brush_item=brushs.eq(total-1);if(brush_item.data('brushtype')=='text'){brush_item.append(jQuery($this).text());}
else{var style=brush_item.data('style');if(style){jQuery($this).attr('style',style);}
brush_item.append(jQuery($this));}}});}}
html=obj.html();current_editor.execCommand('insertHtml',html);current_editor.undoManger.save();if(current_editor.getOpt('open_editor')){current_editor.fireEvent("catchRemoteImage");}
return true;}
else{}
current_editor.execCommand('insertHtml',html);if(current_editor.getOpt('open_editor')){current_editor.fireEvent("catchRemoteImage");}
current_editor.undoManger.save();return true;}
function resetMapUrl(){jQuery(current_editor.selection.document).find('img').each(function(){var $img=jQuery(this);var mapurl=jQuery(this).attr('mapurl');if(mapurl){var usemap=jQuery(this).attr('usemap');if(usemap){jQuery(usemap).each(function(){jQuery(this).remove();})}
usemap=randomString(10);$img.attr('usemap',usemap);$img.after('<map name="'+usemap+'" id="'+usemap+'" style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;"><area style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;" href="'+mapurl+'" shape="default" target="_blank"/></map>'
+'<section>'
+'<map name="'+usemap+'" id="'+usemap+'" style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;"><area style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;" href="'+mapurl+'" shape="default" target="_blank"/></map>'
+'</section>');}});}
function setBackgroundColor(bgcolor,color,history){if(isGreyColor(bgcolor)){return false;}
if(history){current_editor.undoManger.save();}
var active_item=current_editor.currentActive135Item();if(!replace_full_color&&active_item){parseObject(active_item,bgcolor,color);active_item.attr('data-color',bgcolor);active_item.attr('data-custom',bgcolor);current_editor.undoManger.save();return;}
else{if(!replace_full_color){return;}
parseObject(jQuery(current_editor.selection.document),bgcolor,color);jQuery(current_editor.selection.document).find('._135editor').each(function(){jQuery(this).attr('data-color',bgcolor);});}
if(history){current_editor.undoManger.save();}
return;}
function parseObject(obj,bgcolor,color){if(isGreyColor(bgcolor)){return false;}
obj.find("*").each(function(){if(!this.nodeName||this.nodeName=="HTML"||this.nodeName=="HEAD"||this.nodeName=="STYLE"||this.nodeName=="LINK"||this.nodeName=="BODY"){return;}
if(this.nodeName=="HR"||this.nodeName=="hr"){var style=jQuery(this).attr('style');jQuery(this).attr('style',style+';border-color:'+bgcolor+';');return;}
if(this.nodeName==""||jQuery(this).attr('style')==""){return;}
if(jQuery(this).attr('data-ct')=='fix'){return;}
if(jQuery(this).attr('fill')){jQuery(this).attr('fill',bgcolor);return;}
var oldColor=jQuery(this).parents('._135editor:first').attr('data-color');var style=jQuery(this).attr('style');if(oldColor==bgcolor){return;}
if(oldColor&&style&&style.indexOf('text-shadow')>=0){var newstyle=str_replace(rgb2hex(oldColor),bgcolor,style);newstyle=str_replace(hex2rgb(oldColor),bgcolor,newstyle);jQuery(this).attr('style',newstyle);}
var persent=jQuery(this).attr('data-clessp')?jQuery(this).attr('data-clessp'):'50%';var hasSetBgColor=false;var txt_color;var bgC=jQuery(this).get(0).style.backgroundColor;if(!bgC||bgC==='initial'||bgC==='transparent'||bgC===""){var fc=jQuery(this).get(0).style.color;if(fc&&fc!=""&&fc!='inherit'&&!isGreyColor(fc)){if(jQuery(this).attr('data-txtless')){var txtpersent=jQuery(this).attr('data-txtlessp')?jQuery(this).attr('data-txtlessp'):'30%';txt_color=getColor(rgb2hex(bgcolor),jQuery(this).attr('data-txtless'),txtpersent);jQuery(this).css('color',txt_color);}
else if(isLightenColor(bgcolor)){txt_color=getColor(rgb2hex(bgcolor),'darken',persent);jQuery(this).css('color',txt_color);}
else{var parentBgColor=getPrarentBgColor(jQuery(this));if(parentBgColor==bgcolor){txt_color=getColor(rgb2hex(bgcolor),'lighten',persent);jQuery(this).css('color',txt_color);}
else{jQuery(this).css('color',bgcolor);}}}}else{if(typeof(jQuery(this).attr('data-bgless'))!="undefined"){var bgpersent=jQuery(this).attr('data-bglessp')?jQuery(this).attr('data-bglessp'):'30%';var bg_color;if(jQuery(this).attr('data-bgless')=="true"||jQuery(this).attr('data-bgless')==true){if(isLightenColor(bgcolor)){bg_color=getColor(rgb2hex(bgcolor),'darken',bgpersent);bg_color=getColor(rgb2hex(bg_color),'saturate','20%');}
else{bg_color=getColor(rgb2hex(bgcolor),'lighten',bgpersent);}}
else{bg_color=getColor(rgb2hex(bgcolor),jQuery(this).attr('data-bgless'),bgpersent);}
if(jQuery(this).attr('data-bgopacity')){bg_color=getColor(rgb2hex(bg_color),'fadeout',jQuery(this).attr('data-bgopacity'));}
hasSetBgColor=true;jQuery(this).css('backgroundColor',bg_color);if(isLightenColor(bg_color)){txt_color=getColor(rgb2hex(bg_color),'darken',persent);txt_color=getColor(rgb2hex(txt_color),'saturate','20%');}
else{txt_color=color;}
jQuery(this).css('color',txt_color);}
else if(jQuery(this).attr('data-bgopacity')){var bg_color;bg_color=getColor(rgb2hex(bgcolor),'fadeout',jQuery(this).attr('data-bgopacity'));if(isLightenColor(bg_color)){txt_color=getColor(rgb2hex(bg_color),'darken',persent)}
else{txt_color=color;}
jQuery(this).css('backgroundColor',bg_color);jQuery(this).css('color',txt_color);}
else if(!isGreyColor(bgC)){hasSetBgColor=true;jQuery(this).css('backgroundColor',bgcolor);var fc=jQuery(this).get(0).style.color;if(fc!='inherit'){if(isLightenColor(bgcolor)){txt_color=getColor(rgb2hex(bgcolor),'darken',persent)}
else{txt_color=color;}
jQuery(this).css('color',txt_color);}}
else{var fc=jQuery(this).get(0).style.color;if(fc&&fc!=""&&fc!='inherit'&&!isGreyColor(fc)){if(jQuery(this).css('backgroundColor')!=bgcolor){jQuery(this).css('color',bgcolor);}}}}
if(jQuery(this).attr('data-bcless')){var bc_color=bgcolor;if(isLightenColor(bgcolor)){var persent=jQuery(this).attr('data-bclessp')?jQuery(this).attr('data-bclessp'):'20%';if(jQuery(this).attr('data-bcless')=='darken'){bc_color=getColor(rgb2hex(bgcolor),'darken',persent);}
else{bc_color=getColor(rgb2hex(bgcolor),'darken',persent);if(jQuery(this).attr('data-bcless')&&jQuery(this).attr('data-bcless')!='auto'&&jQuery(this).attr('data-bcless')!='true'){bc_color=getColor(rgb2hex(bgcolor),jQuery(this).attr('data-bcless'),persent);}}}
else{var persent=jQuery(this).attr('data-bclessp')?jQuery(this).attr('data-bclessp'):'20%';if(jQuery(this).attr('data-bcless')=='lighten'||jQuery(this).attr('data-bcless')=='auto'||jQuery(this).attr('data-bcless')=='true'){bc_color=getColor(rgb2hex(bgcolor),'lighten',persent);}
else{if(jQuery(this).attr('data-bcless')&&jQuery(this).attr('data-bcless')!='auto'&&jQuery(this).attr('data-bcless')!='true'){bc_color=getColor(rgb2hex(bgcolor),jQuery(this).attr('data-bcless'),persent);}}}
if(jQuery(this).attr('data-bdopacity')){bc_color=getColor(rgb2hex(bc_color),'fadeout',jQuery(this).attr('data-bdopacity'));}
if(this.style.borderBottomColor||this.style.borderTopColor||this.style.borderLeftColor||this.style.borderRightColor){if(this.style.borderBottomColor!='transparent'&&this.style.borderBottomColor.toLowerCase()!='rgb(255, 255, 255)'&&this.style.borderBottomColor.toLowerCase()!='#fff'&&this.style.borderBottomColor!='initial'){this.style.borderBottomColor=bc_color;}
if(this.style.borderTopColor!='transparent'&&this.style.borderTopColor.toLowerCase()!='rgb(255, 255, 255)'&&this.style.borderTopColor.toLowerCase()!='#fff'&&this.style.borderTopColor!='initial'){this.style.borderTopColor=bc_color;}
if(this.style.borderLeftColor!='transparent'&&this.style.borderLeftColor.toLowerCase()!='rgb(255, 255, 255)'&&this.style.borderLeftColor.toLowerCase()!='#fff'&&this.style.borderLeftColor!='initial'){this.style.borderLeftColor=bc_color;}
if(this.style.borderRightColor!='transparent'&&this.style.borderRightColor.toLowerCase()!='rgb(255, 255, 255)'&&this.style.borderRightColor.toLowerCase()!='#fff'&&this.style.borderRightColor!='initial'){this.style.borderRightColor=bc_color;}}
else{if(this.style.borderColor!=='transparent'&&this.style.borderColor!=='initial'){this.style.borderColor=bc_color;}}}
else{var bc_color=bgcolor;if(jQuery(this).attr('data-bdopacity')){bc_color=getColor(rgb2hex(bgcolor),'fadeout',jQuery(this).attr('data-bdopacity'));}
if(this.style.borderBottomColor||this.style.borderTopColor||this.style.borderLeftColor||this.style.borderRightColor){if(this.style.borderBottomColor!='transparent'&&this.style.borderBottomColor!='initial'){setColor(this,'borderBottomColor',bc_color);}
if(this.style.borderTopColor!='transparent'&&this.style.borderTopColor!='initial'){setColor(this,'borderTopColor',bc_color);}
if(this.style.borderLeftColor!='transparent'&&this.style.borderLeftColor!='initial'){setColor(this,'borderLeftColor',bc_color);}
if(this.style.borderRightColor!='transparent'&&this.style.borderRightColor!='initial'){setColor(this,'borderRightColor',bc_color);}}
else{var c=this.style.borderColor;if(c!=='transparent'&&c!=='initial'&&!isGreyColor(c)){this.style.borderColor=bc_color;}}}
var shadow=jQuery(this).css('boxShadow');if(shadow&&shadow!='none'){var reg=new RegExp('rgb\\([\\d|,|\\s]+?\\)','ig');var match=shadow.match(reg);if(match){for(var i=0;i<match.length;i++){if(isGreyColor(match[i])){continue;}
var less_attr='data-shadowless'+i;var shadow_color=bgcolor;if(jQuery(this).attr(less_attr)){var shadowpersent=jQuery(this).attr(less_attr+'p')?jQuery(this).attr(less_attr+'p'):'30%';shadow_color=getColor(rgb2hex(bgcolor),jQuery(this).attr(less_attr),shadowpersent);}
shadow=shadow.replace(match[i],shadow_color).replace(match[i].replace(/ /g,''),shadow_color);}
jQuery(this).css('boxShadow',shadow);}}
var bgimg=jQuery(this).css('backgroundImage');if(bgimg.indexOf('linear-gradient(')>=0){var sty=jQuery(this).attr('style');var reg=new RegExp('rgb\\([\\d|,|\\s]+?\\)','ig');var match=bgimg.match(reg);if(match){if(jQuery(this).attr('data-bgless')){var bgpersent=jQuery(this).attr('data-bglessp')?jQuery(this).attr('data-bglessp'):'30%';main_color=getColor(rgb2hex(bgcolor),jQuery(this).attr('data-bgless'),bgpersent);}
else if(isLightenColor(bgcolor)){main_color=getColor(rgb2hex(bgcolor),'saturate','20%');}
else{main_color=getColor(rgb2hex(bgcolor),'lighten','5%');main_color=getColor(rgb2hex(main_color),'desaturate','10%');main_color=getColor(rgb2hex(main_color),'fadein','20%');}
if(jQuery(this).attr('data-grless')){gradient_color=getColor(rgb2hex(main_color),jQuery(this).attr('data-grless'),jQuery(this).attr('data-grlessp'));}
else if(jQuery(this).attr('data-gradient')){gradient_color=jQuery(this).attr('data-gradient');}
else{gradient_color=getColor(rgb2hex(main_color),'lighten','30%');}
if(isLightenColor(main_color)){txt_color=getColor(rgb2hex(main_color),'darken','50%');txt_color=getColor(rgb2hex(txt_color),'saturate','30%');}
else{txt_color=getColor(rgb2hex(main_color),'lighten','50%');}
for(var i=0;i<match.length;i++){if(isGreyColor(match[i])){continue;}
if(jQuery(this).attr('data-grorder')=='reverse'){if(i%2==0||(i>0&&match[i]==match[i-1])){sty=sty.replace(match[i],gradient_color).replace(match[i].replace(/ /g,''),gradient_color);}
else{sty=sty.replace(match[i],main_color).replace(match[i].replace(/ /g,''),main_color);}}
else{if(i%2==0||(i>0&&match[i]==match[i-1])){sty=sty.replace(match[i],main_color).replace(match[i].replace(/ /g,''),main_color);}
else{sty=sty.replace(match[i],gradient_color).replace(match[i].replace(/ /g,''),gradient_color);}}}
jQuery(this).attr('style',sty);jQuery(this).css('color',txt_color);}}});return obj;}
function parseHtml(html,bgcolor,color){var obj=jQuery('<div id="editor-content">'+html+"</div>");obj=parseObject(obj,bgcolor,color);var result=obj.html();obj=null;return result;}
function style_click(id){var url=BASEURL+'/editor_styles/click_num';ajaxAction(url,{id:id});return false;}
function setFavorColor(colors,callback){var url=BASEURL+'/editor_styles/setFavorColor';ajaxAction(url,{colors:colors},null,callback);}
function color_click(color){color=hex2rgb(color);var url=BASEURL+'/colors/click';ajaxAction(url,{color:color});return false;}
function setColor(obj,colorType,color){var c=jQuery(obj).css(colorType);if(c==='transparent'||c==='initial'){return;}else{if(!isGreyColor(c)){jQuery(obj).css(colorType,color);}}}
function getPrarentBgColor($obj){if(!$obj.parent().get(0)){return"";}
if($obj.parent().get(0).tagName&&$obj.parent().get(0).tagName=='BODY'){if($obj.parent().get(0).style){var bgC=$obj.parent().get(0).style.backgroundColor;return bgC;}
else{return"";}}
if($obj.parent().get(0).style){var bgImg=$obj.parent().get(0).style.backgroundImage;if(bgImg&&bgImg!=""){return"";}
var bgC=$obj.parent().get(0).style.backgroundColor;if(!bgC||bgC==='initial'||bgC==='transparent'||bgC===""){return getPrarentBgColor($obj.parent());}
else{return bgC;}}
else{return"";}}
function rgb2hex(color){rgb=color.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(rgb&&rgb.length===4)?"#"+
("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+
("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+
("0"+parseInt(rgb[3],10).toString(16)).slice(-2):color;}
function hex2rgb(color){var reg=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;var sColor=color.toLowerCase();if(sColor&&reg.test(sColor)){if(sColor.length===4){var sColorNew="#";for(var i=1;i<4;i+=1){sColorNew+=sColor.slice(i,i+1).concat(sColor.slice(i,i+1));}
sColor=sColorNew;}
var sColorChange=[];for(var i=1;i<7;i+=2){sColorChange.push(parseInt("0x"+sColor.slice(i,i+2)));}
return"rgb("+sColorChange.join(",")+")";}else{return sColor;}};function isLightenColor(color){var c=rgb2hex(color);var r=(""+c.substring(1,3));var g=(""+c.substring(3,5));var b=(""+c.substring(5,7));if(r>'C0'&&g>'C0'&&b>'C0'){return true;}
else{return false;}}
function isGreyColor(color){var c=rgb2hex(color);var r=""+c.substring(1,3);var g=""+c.substring(3,5);var b=""+c.substring(5,7);if(r==g&&g==b){return true;}
else{return false;}}
function getColor(color,type,num){var str='';var color_obj=tinycolor(color);if(typeof(color_obj[type])=='function'){num=parseInt(num.replace('%',''));return hex2rgb(color_obj[type](num).toString());}
else if(type=='fade'||type=='fadein'||type=='fadeout'){if(num.indexOf('%')>0){num=num.replace('%','');num=parseInt(num)/100;}
if(type=='fadein'){num+=color_obj.getAlpha();}
else if(type=='fadeout'){num=color_obj.getAlpha()-num;}
return hex2rgb(color_obj.setAlpha(num).toString());}
return color;}
function LightenDarkenColor(col,amt){var usePound=false;if(col[0]=="#"){col=col.slice(1);usePound=true;}
var num=parseInt(col,16);var r=(num>>16)+amt;if(r>255)r=255;else if(r<0)r=0;var b=((num>>8)&0x00FF)+amt;if(b>255)b=255;else if(b<0)b=0;var g=(num&0x0000FF)+amt;if(g>255)g=255;else if(g<0)g=0;return(usePound?"#":"")+(g|(b<<8)|(r<<16)).toString(16);}
function openTplModal(){jQuery('#templateModal').modal('show');jQuery('#template-modal-body').html('正在加载').load(BASEURL+'/editor_styles/myTemplates #my-templates',function(){jQuery('#my-templates .nav-tabs a:first').tab('show')})}
function set_style(styles){ckeditors['WxMsgContent'].execCommand('removeFormat');var element=ckeditors['WxMsgContent'].getSelection().getStartElement();if(element.getName()=='img'){element.setStyles(styles);}
else{var style=new CKEDITOR.style({element:element.getName(),styles:styles});ckeditors['WxMsgContent'].applyStyle(style);}}
function getPreferences(idx){var cookieOpt=current_editor.getPreferences('editor135');if(cookieOpt&&cookieOpt[idx]){return cookieOpt[idx];}
return null;}
function setPreferences(key,value){var cookieOpt=current_editor.getPreferences('editor135');var obj={};if(typeof(key)=="string"){obj[key]=value;}else{obj=key;}
if(!cookieOpt)cookieOpt={};jQuery.extend(cookieOpt,obj);current_editor.setPreferences('editor135',cookieOpt);}
function applyParagraph(type){var object;if(type=='all'){var editor_document=current_editor.selection.document;object=jQuery(editor_document);}
else{if(!current_editor.currentActive135Item())return;object=current_editor.currentActive135Item();}
jQuery(object).find('p').each(function(){jQuery(this).css('lineHeight',jQuery('#paragraph-lineHeight').val());jQuery(this).css('fontFamily',jQuery('#paragraph-fontFamily').val());jQuery(this).css('fontSize',jQuery('#paragraph-fontSize').val());jQuery(this).css('textIndent',jQuery('#paragraph-textIndent').val());jQuery(this).css('paddingTop',jQuery('#paragraph-paddingTop').val());jQuery(this).css('paddingBottom',jQuery('#paragraph-paddingBottom').val());})}
function clean_135helper(){var editor_document=current_editor.document;jQuery(editor_document).find('._135editor').each(function(){jQuery(this).find('.tool-border').remove();jQuery(this).removeClass('active');jQuery(this).css({'border':'0 none'});});current_editor.sync();}
function showColorPlan(clientY){if(current_editor){var $container=jQuery(current_editor.container);var offset=$container.offset();var width=$container.width();var height=$container.height();if(offset.left+width+jQuery('#color-plan').width()<jQuery(window).width()){jQuery('#color-plan').css('left',offset.left+width-5);}
else{jQuery('#color-plan').css('left',offset.left-jQuery('#color-plan').width());}
if(clientY){if(clientY-jQuery(window).scrollTop()>jQuery('#color-plan').height()/2){var top=clientY-jQuery(window).scrollTop()-(jQuery('#color-plan').height()/2);if(jQuery(window).height()-top>jQuery('#color-plan').height()){jQuery('#color-plan').css('bottom','auto');if(top<offset.top+$container.find('.edui-editor-toolbarbox').height()-jQuery(window).scrollTop()){jQuery('#color-plan').css('top',offset.top+$container.find('.edui-editor-toolbarbox').height()-jQuery(window).scrollTop());}
else if(top+jQuery('#color-plan').height()>offset.top+$container.height()-jQuery(window).scrollTop()){jQuery('#color-plan').css('top',offset.top+$container.height()-jQuery(window).scrollTop()-jQuery('#color-plan').height()+20);}
else{jQuery('#color-plan').css('top',top);}}
else{jQuery('#color-plan').css('top','auto');jQuery('#color-plan').css('bottom',0);}}
else{if(jQuery(window).scrollTop()<offset.top+$container.find('.edui-editor-toolbarbox').height()){jQuery('#color-plan').css('top',offset.top+$container.find('.edui-editor-toolbarbox').height()-jQuery(window).scrollTop());jQuery('#color-plan').css('bottom','auto');}
else{jQuery('#color-plan').css('top',0);jQuery('#color-plan').css('bottom','auto');}}}
else{jQuery('#color-plan').css('top',offset.top+height/2-120-jQuery(window).scrollTop());}
jQuery('#color-plan').show();}
else{jQuery('#color-plan').show();}}
function hideColorPlan(){jQuery('#color-plan').hide();}
function meitu_upload(callback){if(sso.check_userlogin()){publishController.open_html_dialog('meitu-full');xiuxiu.setLaunchVars("titleVisible",0);xiuxiu.setLaunchVars("maxFinalWidth",600);xiuxiu.setLaunchVars("customMenu",["decorate","facialMenu","puzzle"]);xiuxiu.setLaunchVars("uploadBtnLabel","上传","meitu_full");xiuxiu.embedSWF("MeituFullContent",3,940,600,"meitu_full");xiuxiu.setUploadURL(BASEURL+'/uploadfiles/upload');xiuxiu.setUploadType(2);xiuxiu.setUploadDataFieldName("upload");xiuxiu.onBeforeUpload=function(data,id)
{var size=data.size;if(size>1024*1024)
{alert("图片不能超过1M");return false;}
xiuxiu.setUploadArgs({'return':"xiuxiu",'remote_type':'wechatUploadimg','no_thumb':1,'MIAOCMS[Auth][User]':jQuery.cookie('MIAOCMS[Auth][User]')},id);return true;};xiuxiu.onUploadResponse=function(data,id){try{var json=eval('('+data+')');}catch(e){alert(data);return;}
if(json.ret==-1){showErrorMessage(json.error);}
else{var range=current_editor.selection.getRange();var change=false;if(!range.collapsed){var img=range.getClosedNode();if(img&&img.tagName=='IMG'){img.src=json.url;img.setAttribute('_src',json.url);var p=$(img).parent();if(p.attr('data-role')=='circle'||p.attr('data-role')=='bgmirror'||p.attr('data-role')=='square'){p.css('backgroundImage','url('+json.url+')');}
change=true;}}
if(!change){insertHtml('<img src="'+json.url+'" _src="'+json.url+'">');}
publishController.close_dialog();}
if(typeof(callback)=='function'){return callback(json.url);}};xiuxiu.onClose=function(id){publishController.close_dialog();}}
else{showErrorMessage('图片美图上传功能需要登录后才能使用');}}
function pingtu_upload(callback){if(sso.check_userlogin()){publishController.open_html_dialog('meitu-pingtu');xiuxiu.setLaunchVars("titleVisible",0);xiuxiu.setLaunchVars("maxFinalWidth",600);xiuxiu.setLaunchVars("uploadBtnLabel","上传","meitu_pingtu");xiuxiu.embedSWF("MeituPingTuContent",2,700,500,"meitu_pingtu");xiuxiu.setUploadURL(BASEURL+'/uploadfiles/upload');xiuxiu.setUploadType(2);xiuxiu.setUploadDataFieldName("upload");xiuxiu.onBeforeUpload=function(data,id)
{var size=data.size;if(size>1024*1024)
{alert("图片不能超过1M");return false;}
xiuxiu.setUploadArgs({'return':"xiuxiu",'remote_type':'wechatUploadimg','no_thumb':1,'MIAOCMS[Auth][User]':jQuery.cookie('MIAOCMS[Auth][User]')},id);return true;};xiuxiu.onUploadResponse=function(data,id){try{var json=eval('('+data+')');}catch(e){alert(data);return;}
if(json.ret==-1){showErrorMessage(json.error);}
else{var range=current_editor.selection.getRange();var change=false;if(!range.collapsed){var img=range.getClosedNode();if(img&&img.tagName=='IMG'){img.src=json.url;img.setAttribute('_src',json.url);var p=$(img).parent();if(p.attr('data-role')=='circle'||p.attr('data-role')=='bgmirror'||p.attr('data-role')=='square'){p.css('backgroundImage','url('+json.url+')');}
change=true;}}
if(!change){insertHtml('<img src="'+json.url+'" _src="'+json.url+'">');}
publishController.close_dialog();}
if(typeof(callback)=='function'){return callback(json.url);}};xiuxiu.onClose=function(id){publishController.close_dialog();}}
else{showErrorMessage('图片拼图上传功能需要登录后才能使用');}}
function isGif(url){var idx=url.indexOf('cache/remote/');if(idx>0){url=base64_decode(url.substring(idx+13))}
if(url.indexOf('.gif')>0||url.indexOf('wx_fmt=gif')>0){return true;}
else{return false;}}
function soogif_edit(_src){var _html='<div id="iframeShade">'
+'<div id="iframeContainer">'
+'<iframe id="qiframe" src="http://www.soogif.com/html/toolapi/index.html?src='+_src+'&t=2" width="100%" height="540" frameborder="0"></iframe>'
+'<span class="iframeClose">&times;</span>'
+'</div></div>';$(_html).appendTo($("body"));$("#iframeShade").css({"display":"block","position":"fixed","left":"0","z-index":"10000","top":"0","width":"100%","height":"100%","background":"rgba(0,0,0,0.3)"}).find("#iframeContainer").css({"position":"absolute","left":"50%","top":"50%","-webkit-transform":"translate(-50%,-50%)","-moz-transform":"translate(-50%,-50%)","-ms-transform":"translate(-50%,-50%)","transform":"translate(-50%,-50%)","width":"85%","height":"540px","box-sizing":"border-box"}).find(".iframeClose").css({"position":"absolute","right":"-45px","top":"0","width":"46px","height":"46px","font":'bold 39px/39px "PingFangSC-Regular","microsoft yahei"',"text-align":"center","line-height":"41px","background":"#F2395B","color":"#fff","cursor":"pointer"});$("body").delegate("#iframeShade #iframeContainer .iframeClose","click",function(){$("#iframeShade").remove();});}
function edit_image(url){if(sso.check_userlogin()){if(isGif(url)){soogif_edit(url);return;}
publishController.open_html_dialog('meitu-beautify');xiuxiu.setLaunchVars("titleVisible",0);xiuxiu.setLaunchVars("maxFinalWidth",600);xiuxiu.setLaunchVars("uploadBtnLabel","上传","beautify");xiuxiu.embedSWF("MeituContent",1,700,500,"beautify");xiuxiu.setUploadURL(BASEURL+'/uploadfiles/upload');xiuxiu.setUploadType(2);xiuxiu.setUploadDataFieldName("upload");xiuxiu.onBeforeUpload=function(data,id)
{var size=data.size;if(size>1024*1024)
{alert("图片不能超过1M");return false;}
xiuxiu.setUploadArgs({'return':"xiuxiu",'url':url,'remote_type':'wechatUploadimg','no_thumb':1,'MIAOCMS[Auth][User]':jQuery.cookie('MIAOCMS[Auth][User]')},id);return true;};xiuxiu.onInit=function()
{if(url){if(url.indexOf('remote.wx135.com')>0||(url.indexOf('.135editor.com')<0&&url.indexOf('.wx135.com')<0)){url=BASEURL+'/downloads/fetch_url?fu='+encodeURIComponent(url);}
xiuxiu.loadPhoto(url);}
publishController.focus_close();};xiuxiu.onUploadResponse=function(data,id){try{var json=eval('('+data+')');}catch(e){alert(data);return;}
if(json.ret==-1){showErrorMessage(json.error);}
else{if(url&&current_edit_img){var new_url=json.url;current_edit_img.src=new_url;current_edit_img.setAttribute("_src",new_url);}
else{insertHtml('<img src="'+json.url+'" _src="'+json.url+'">');}
publishController.close_dialog();}};xiuxiu.onClose=function(id){publishController.close_dialog();}}
else{showErrorMessage('编辑图片属于付费功能。更换图片请直接双击图片');}};
!function(a){var b=function(){return!1===a.support.boxModel&&a.support.objectAll&&a.support.leadingWhitespace}();a.jGrowl=function(b,c){var position = c&&c.position?c.position:a.jGrowl.defaults.position;0===a("#jGrowl").size()&&a('<div id="jGrowl"></div>').addClass(position).appendTo("body"),a("#jGrowl").attr('class',position+' jGrowl'),a("#jGrowl").jGrowl(b,c)},a.fn.jGrowl=function(b,c){if(a.isFunction(this.each)){var d=arguments;return this.each(function(){void 0===a(this).data("jGrowl.instance")&&(a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl,{notifications:[],element:null,interval:null})),a(this).data("jGrowl.instance").startup(this)),a.isFunction(a(this).data("jGrowl.instance")[b])?a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"),a.makeArray(d).slice(1)):a(this).data("jGrowl.instance").create(b,c)})}},a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:false,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(b,c){var d=a.extend({},this.defaults,c);"undefined"!=typeof d.speed&&(d.openDuration=d.speed,d.closeDuration=d.speed),this.notifications.push({message:b,options:d}),d.log.apply(this.element,[this.element,b,d])},render:function(b){var c=this,d=b.message,e=b.options;e.themeState=""===e.themeState?"":"ui-state-"+e.themeState;var f=a("<div/>").addClass("jGrowl-notification "+e.themeState+" ui-corner-all"+(void 0!==e.group&&""!==e.group?" "+e.group:"")).append(a("<div/>").addClass("jGrowl-close").html(e.closeTemplate)).append(a("<div/>").addClass("jGrowl-header").html(e.header)).append(a("<div/>").addClass("jGrowl-message").html(d)).data("jGrowl",e).addClass(e.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){a(this).parent().trigger("jGrowl.beforeClose")}).parent();a(f).bind("mouseover.jGrowl",function(){a("div.jGrowl-notification",c.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){a("div.jGrowl-notification",c.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){e.beforeOpen.apply(f,[f,d,e,c.element])!==!1&&a(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){e.open.apply(f,[f,d,e,c.element])!==!1&&("after"==e.glue?a("div.jGrowl-notification:last",c.element).after(f):a("div.jGrowl-notification:first",c.element).before(f),a(this).animate(e.animateOpen,e.openDuration,e.easing,function(){a.support.opacity===!1&&this.style.removeAttribute("filter"),null!==a(this).data("jGrowl")&&(a(this).data("jGrowl").created=new Date),a(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){e.afterOpen.apply(f,[f,d,e,c.element])}).bind("jGrowl.beforeClose",function(){e.beforeClose.apply(f,[f,d,e,c.element])!==!1&&a(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",!0),a(this).animate(e.animateClose,e.closeDuration,e.easing,function(){a.isFunction(e.close)?e.close.apply(f,[f,d,e,c.element])!==!1&&a(this).remove():a(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==e.corners&&void 0!==a.fn.corner&&a(f).corner(e.corners),a("div.jGrowl-notification:parent",c.element).size()>1&&0===a("div.jGrowl-closer",c.element).size()&&this.defaults.closer!==!1&&a(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(c.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose"),a.isFunction(c.defaults.closer)&&c.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])})},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){void 0!==a(this).data("jGrowl")&&void 0!==a(this).data("jGrowl").created&&a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life,10)<(new Date).getTime()&&a(this).data("jGrowl").sticky!==!0&&(void 0===a(this).data("jGrowl.pause")||a(this).data("jGrowl.pause")!==!0)&&a(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||a(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),a(this.element).find("div.jGrowl-notification:parent").size()<2&&a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})},startup:function(c){this.element=a(c).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){a(c).data("jGrowl.instance").update()},parseInt(this.defaults.check,10)),b&&a(this.element).addClass("ie6")},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){a(this.element).find("div.jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}}),a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults}(jQuery);;

(function($){var pluginName='slider',initAllSelector='[data-role=slider], .slider',paramKeys=['InitValue','Accuracy'];$[pluginName]=function(element,options){if(!element){return $()[pluginName]({initAll:true});}
var defaults={initValue:0,accuracy:1};var plugin=this;plugin.settings={};var $element=$(element);var complete,marker,currentValuePerc,sliderLength,sliderOffset,sliderStart,sliderEnd,percentPerPixel,markerSize,vertical=false;plugin.init=function(){plugin.settings=$.extend({},defaults,options);complete=$('<div class="complete"></div>');marker=$('<div class="marker"></div>');complete.appendTo($element);marker.appendTo($element);vertical=$element.hasClass('vertical');initGeometry();currentValuePerc=correctValuePerc(plugin.settings.initValue);placeMarkerByPerc(currentValuePerc);marker.on('mousedown',function(e){e.preventDefault();startMoveMarker(e);});$element.on('mousedown',function(e){e.preventDefault();startMoveMarker(e);});$element.trigger('inited',[currentValuePerc]);};var correctValuePerc=function(value){var accuracy=plugin.settings.accuracy;if(accuracy===0){return value;}
if(value===100){return 100;}
value=Math.floor(value/accuracy)*accuracy+Math.round(value%accuracy/accuracy)*accuracy;if(value>100){return 100;}
return value;};var pixToPerc=function(valuePix){var valuePerc;valuePerc=valuePix*percentPerPixel;return correctValuePerc(valuePerc);};var percToPix=function(value){if(percentPerPixel===0){return 0;}
return value/percentPerPixel;};var placeMarkerByPerc=function(valuePerc){var size,size2;if(vertical){size=percToPix(valuePerc)+markerSize;size2=sliderLength-size;marker.css('top',size2);complete.css('height',size);}else{size=percToPix(valuePerc);marker.css('left',size);complete.css('width',size);}};var startMoveMarker=function(e){$(document).on('mousemove.sliderMarker',function(event){movingMarker(event);});$(document).on('mouseup.sliderMarker',function(){$(document).off('mousemove.sliderMarker');$(document).off('mouseup.sliderMarker');$element.data('value',currentValuePerc);$element.trigger('changed',[currentValuePerc]);});initGeometry();movingMarker(e)};var initGeometry=function(){if(vertical){sliderLength=$element.height();sliderOffset=$element.offset().top;markerSize=marker.height();}else{sliderLength=$element.width();sliderOffset=$element.offset().left;markerSize=marker.width();}
percentPerPixel=100/(sliderLength-markerSize);sliderStart=markerSize/2;sliderEnd=sliderLength-markerSize/2;};var movingMarker=function(event){var cursorPos,percents,valuePix;if(vertical){cursorPos=event.pageY-sliderOffset;}else{cursorPos=event.pageX-sliderOffset;}
if(cursorPos<sliderStart){cursorPos=sliderStart;}else if(cursorPos>sliderEnd){cursorPos=sliderEnd;}
if(vertical){valuePix=sliderLength-cursorPos-markerSize/2;}else{valuePix=cursorPos-markerSize/2;}
percents=pixToPerc(valuePix);placeMarkerByPerc(percents);currentValuePerc=percents;$element.trigger('change',[currentValuePerc]);};plugin.val=function(value){if(typeof value!=='undefined'){currentValuePerc=correctValuePerc(value);placeMarkerByPerc(currentValuePerc);return currentValuePerc;}else{return currentValuePerc;}};plugin.init();};$.fn[pluginName]=function(options){var elements=options.initAll?$(initAllSelector):this;return elements.each(function(){var that=$(this),params={},plugin;if(undefined==that.data(pluginName)){$.each(paramKeys,function(index,key){params[key[0].toLowerCase()+key.slice(1)]=that.data('param'+key);});plugin=new $[pluginName](this,params);that.data(pluginName,plugin);}});};$(function(){$()[pluginName]({initAll:true});});})(jQuery);;

var swfu_array=[];var ckeditors={};var swfu_array=[];var last_open_dialog=null;var jqgrid_scrollOffset=null;var form_submit_flag_for_swfupload=false;var form_submit_obj_for_swfupload=null;function singleSubmitDigg(model,data_id,question_id,option_id,callback)
{var postdata={model:model,data_id:data_id};postdata['options['+question_id+']['+option_id+']']=1;$.ajax({type:'post',url:BASEURL+'/appraiseresults/singlesubmit',data:postdata,success:function(data){if(data.error){alert(data.error);return false;}
if(typeof(callback)=='function'){var obj=callback(data);}},dataType:'json'});return false;}
function setDiggNum(data,total)
{var id='#Digg-'+data.model+'-'+data.data_id+'-'+data.question_id+'-'+data.option_id;$(id).html('('+data.value+')');if(total){var bar='#Diggbar-'+data.model+'-'+data.data_id+'-'+data.question_id+'-'+data.option_id;var p=data.value/total*100;$(bar).attr("width",p);}
else{var bar='#Diggbar-'+data.model+'-'+data.data_id+'-'+data.question_id+'-'+data.option_id;if($(bar).length>0)
{var total=0;$("[id^='Digg-"+data.model+"-"+data.data_id+"-']").each(function(){var num=$(this).html();num=num.replace(/\(|\)/g,'');total+=parseInt(num);});$("[id^='Diggbar-"+data.model+"-"+data.data_id+"-']").each(function(){var numid=this.id.replace(/Diggbar-/,'Digg-');var num=$("#"+numid).html();num=num.replace(/\(|\)/g,'');var height=parseInt(num);var p=height/total*100;$('span',this).css("width",p);$(this).next().html(p.toFixed(2)+'%');});}}}
function keep_session(){var url=BASEURL+'/users/keep_session';ajaxActionHtml(url,null,function(html){});}
var check_interval=null;function getLoginQr(){$('.refresh_qrcode_mask').hide();ajaxAction(BASEURL+'/users/getLoginQr',null,null,function(request){if(request.ret==0){$('#wechat-qr-image').attr('src','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='+request.ticket);if(check_interval){clearInterval(check_interval);}
$('.refresh-logqr-tips').html('扫码关注后，自动登录');var scene_id=request.scene_id;var expriretimeout=setTimeout(function(){$('.refresh_qrcode_mask').show();$('.refresh-logqr-tips').html('二维码过期，点击刷新');clearInterval(check_interval);},60000);check_interval=setInterval(function(){ajaxAction(BASEURL+'/users/checkQrLogin/'+scene_id,null,null,function(request){if(request.ret==0){clearInterval(check_interval);clearTimeout(expriretimeout);}
else if(request.ret<0){clearInterval(check_interval);clearTimeout(expriretimeout);$('.refresh_qrcode_mask').show();$('.refresh-logqr-tips').html(request.msg);}});},3000);}
else{$('#login-Tabs li:eq(1) a').tab('show');showErrorMessage('登录二维码生成错误，请用账号密码登录或者第三方账号登录中的微信登录。<br/>'+request.errmsg);}});};var rs_callbacks={loginSuccess:function(request){if(request.ret==0){publishController.close_dialog();$('#login_errorinfo').hide();if(sso.form){$(sso.form).trigger("submit");sso.form=null;}
if(sso.callback){sso.callback.apply(sso.callback,sso.callback_args);}
$('#login-menus').removeClass('hidden');$('#login-links').addClass('hidden');$('#login-user-name').html(request.userinfo.username);$('#login-user-id').html(request.userinfo.id);keep_session();if(window.location.href.indexOf('/users/login')>=0){window.location.reload();}}
else{}},addtoCart:function(request){$('#shopping-cart-num').html(request.total);if(request.msg){if(request.ret==0){showSuccessMessage(request.msg);}
else{showErrorMessage(request.msg);}}
else if(request.success){showSuccessMessage(request.success);}},deleteFromCart:function(request){if(request.msg){if(request.ret==0){showSuccessMessage(request.msg);}
else{showErrorMessage(request.msg);}}
else if(request.success){showSuccessMessage(request.success);}},deleteGridRow:function(request,obj){$(obj).closest('tr.jqgrow').remove();if(request.msg){if(request.ret==0){showSuccessMessage(request.msg);}
else{showErrorMessage(request.msg);}}
else if(request.success){showSuccessMessage(request.success);}},reloadGrid:function(request,obj){var grid=$(obj).closest('table.jqgrid-list').remove();var page=grid.jqGrid("getGridParam","page");grid.jqGrid("setGridParam",{page:page}).trigger("reloadGrid");if(request.msg){if(request.ret==0){showSuccessMessage(request.msg);}
else{showErrorMessage(request.msg);}}
else if(request.success){showSuccessMessage(request.success);}}};function ajaxAction(url,postdata,form,callback_func_name,moreags){if(url.search(/\?/)!=-1){url+='&inajax=1';}
else{url+='?inajax=1';}
if(form){$(':submit',form).each(function(){var html=$(this).html();$(this).data('html',html).html('<img src="'+BASEURL+'/img/ajax/circle_ball.gif"> '+html).attr('disabled','disabled');});}
$.ajax({type:'post',url:url,data:postdata,complete:function(XMLHttpRequest,textStatus){if(form){$(':submit',form).each(function(){var html=$(this).data('html');$(this).html(html).removeAttr('disabled');})}},success:function(request){if(typeof($(form).data('callback'))=='function'){var func=$(form).data('callback');if(moreags){func(request,moreags);}
else{func(request);}}
else if(typeof(callback_func_name)=='function'){callback_func_name(request);}
else if(callback_func_name&&rs_callbacks[callback_func_name]){var func=rs_callbacks[callback_func_name];if(moreags){func(request,moreags);}
else{func(request);}}
else{if(request.msg){if(request.ret==0){showSuccessMessage(request.msg);}
else{showErrorMessage(request.msg);}}
else if(request.success){showSuccessMessage(request.success);}
else if(request.error&&!request.tasks){showErrorMessage(request.error);var errorinfo='';for(var i in request){errorinfo+="<span class='ui-state-error ui-corner-all'><span class='ui-icon ui-icon-alert'></span>"+request[i]+"</span>";}}}
if(form){$(':submit',form).each(function(){var html=$(this).data('html');$(this).html(html).removeAttr('disabled');})}
if(request.tasks){$(request.tasks).each(function(i){var task=request.tasks[i];if(task.dotype=="html"){if($(task.selector,form).length>0){$(task.selector,form).html(task.content).show();}
else{$(task.selector).html(task.content).show();}}
else if(task.dotype=="value"){if($(task.selector,form).length>0){$(task.selector,form).val(task.content);}
else{$(task.selector).val(task.content);}}
else if(task.dotype=="append"){$(task.content).appendTo(task.selector);}
else if(task.dotype=="msg_dialog"){publishController.open_msg_dialog(task.id,task.title,task.content);}
else if(task.dotype=="close_dialog"){publishController.close_dialog();}
else if(task.dotype=="location"){window.location.href=task.url;}
else if(form&&task.dotype=="reset"){$(form).trigger('reset');}
else if(task.dotype=="reload"){window.location.reload();}
else if(task.dotype=="jquery"&&task.func&&typeof($(task.selector)[task.func])=='function'){if(task.args){$(task.selector)[task.func](task.args);}
else{$(task.selector)[task.func]();}}
else if(task.dotype=="rscallback"){var func=rs_callbacks[task.callback];if(moreags){func(request,moreags);}
else{func(request);}}
else if(task.dotype=="callback"){var callback=null,thisArg=null;eval("callback= "+task.callback+";");eval("thisArg= "+task.thisArg+";");var args=[];for(var i in task.callback_args){args[args.length]=task.callback_args[i];}
if(callback){callback.apply(thisArg,args);}}});}},dataType:"json"});return false;}
function ajaxActionHtml(url,selector,callback){$.ajax({async:true,type:'get',url:url,success:function(data){if(selector){$(selector).html(data);}
if(typeof(callback)=='function'){callback(data);}
else if(callback){eval(callback);}},dataType:"html"});}
function setCKEditorVal(form)
{if(typeof(CKEDITOR)!='undefined'){if(form){$(form).find('textarea').each(function(i){if(this.id&&this.id!=""){var oEditor=CKEDITOR.instances[this.id];if(typeof(oEditor)!='undefined'){var content=oEditor.getData();$(this).val(content);}}});}
else{$('form .wygiswys').find('textarea').each(function(){var oEditor=CKEDITOR.instances[this.id];if(typeof(oEditor)!='undefined')
{var content=oEditor.getData();$(this).val(content);}});}}}
function ajaxSubmitForm(form,callback_func_name)
{setCKEditorVal(form);$(form).find('.help-block').html('');ajaxAction(form.action,$(form).serialize(),form,callback_func_name);return false;}
function clearUserCookie(){$.cookie.raw=true;$.removeCookie('MIAOCMS[Auth][User]',{'path':'/'});$.removeCookie('MIAOCMS[Auth][User]',{'domain':document.domain,'path':'/'});if(domain_host){$.removeCookie('MIAOCMS[Auth][User]',{'domain':domain_host,'path':'/'});}
var arr=document.domain.split('.');if(arr.length>2){arr.shift();var topdomain=arr.join('.');$.removeCookie('MIAOCMS[Auth][User]',{'domain':topdomain,'path':'/'});}
$.cookie.raw=false;showSuccessMessage('清除Cookie成功');return false;}
var sso={usercookie:$.cookie('MIAOCMS[Auth][User]'),form:null,callback:null,callback_args:null,check_userlogin:function(params){this.usercookie=$.cookie('MIAOCMS[Auth][User]');if(this.usercookie==null||this.usercookie==""||typeof(this.usercookie)=='undefined'){if(params&&params.callback){this.callback=params.callback;}else{this.callback='';}
if(params&&params.form){this.form=params.form;}else{this.form=null;}
if(params&&params.callback_args){this.callback_args=params.callback_args;}else{this.callback_args='';}
var url=BASEURL+'/users/login';if(params&&params.query){params.query+='&return=html';url+='?'+params.query;}
else{url+='?return=html';}
publishController.open_dialog(url,{'title':$.jslanguage.needlogin,'id':'user-login-dialog',callback:getLoginQr,selector:'#login-form',width:550});return false;}
return true;},is_login:function(){this.usercookie=$.cookie('MIAOCMS[Auth][User]');if(this.usercookie==null||this.usercookie==""||typeof(this.usercookie)=='undefined'){return false;}
return true;}};function checkAll(obj,selector){if(obj.checked){$(selector).find(':checkbox').prop('checked',true);}
else{$(selector).find(':checkbox').prop('checked',false);}}
function checkLogin(params){if(!sso.check_userlogin(params)){return false;}
else{ajaxAction('/users/login');return false;}}
var publishController={_crontroller:'questions',dialogid:null,overlays:{},loading_html:'<img src="/img/ajax/wheel_throbber.gif"> 正在加载...',open_dialog:function(url,options,postdata){var $dialog=this;if(options==null){options={};}
$dialog.loading_html='<img src="'+BASEURL+'/img/ajax/wheel_throbber.gif"> 正在加载...';var lastid=$dialog.dialogid;if(options.id){$dialog.dialogid=options.id;}
else{$dialog.dialogid=url.replace(/\/|\.|:|,| |\{|\}|\]|\[|\"|\'|\?|=|&/g,'_')+'-ajax—action';}
function dialog_loaded(){$('.nav-tabs a','#'+$dialog.dialogid).click(function(e){e.preventDefault();$(this).blur();$(this).tab('show');});$('.nav-tabs a:first','#'+$dialog.dialogid).tab('show');$('.dropdown-toggle','#'+$dialog.dialogid).dropdown();$('button','#'+$dialog.dialogid).addClass('btn');$('[data-toggle="tooltip"],.showtooltip','#'+$dialog.dialogid).tooltip({container:'#'+$dialog.dialogid,html:true});$('[data-toggle="popover"]','#'+$dialog.dialogid).popover({html:true});if(typeof(options.callback)=='function'){options.callback($("#"+$dialog.dialogid));}
$("#"+$dialog.dialogid).find('form').each(function(){if(typeof($(this).attr("target"))!='undefined'){return true;}
if(typeof($(this).attr('onsubmit'))=="undefined"){if($.fn.validate){$(this).data('submitCallback',options.submitCallback)
validateForm(this);}
else{$(this).on('submit',function(){ajaxSubmitForm(this,function(request){if(request.ret==0){showSuccessMessage(request.msg);if(typeof(options.submitCallback)=='function'){options.submitCallback(request);}
$("#"+$dialog.dialogid).modal('hide');}});return false;})}}})}
function load_url(){$("#"+$dialog.dialogid).find('a').unbind('click').click(function(){var url=$(this).attr('href');var re=/^#/;if(typeof($(this).attr("target"))!='undefined'||re.test(url)||typeof($(this).attr('onclick'))!="undefined"||url.substr(0,10).toLowerCase()=="javascript"){return true;}
$("#"+$dialog.dialogid).find('.modal-body').load(url,function(){load_url();});return false;});dialog_loaded();page_loaded();}
if($("#"+$dialog.dialogid).length<1){$('<div  class="modal" id="'+$dialog.dialogid+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h3 id="myModalLabel">'+options.title+'</h3><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body">'+$dialog.loading_html+'</div></div></div></div>').appendTo("body");}
else{$("#"+$dialog.dialogid).find('.modal-body').html($dialog.loading_html);}
$("#"+$dialog.dialogid).find('.modal-body').css('max-height',$(window).height()-120).css('overflow-y','auto');if(postdata!=null){$.ajax({type:"post",url:url,data:postdata,complete:function(XMLHttpRequest,textStatus){},success:function(html){if(options.selector&&$(html).find(options.selector).length>0){$("#"+$dialog.dialogid).find('.modal-body').html($(html).find(options.selector).html());}
else{$("#"+$dialog.dialogid).find('.modal-body').html(html);}
load_url();},dataType:"html"});}
else{if(options.selector){var obj=$("#"+$dialog.dialogid).find('.modal-body').load(url+' '+options.selector,{},function(){load_url();});}
else{var obj=$("#"+$dialog.dialogid).find('.modal-body').load(url,{},function(){load_url();});}}
if(options.nobackdrop){$("#"+$dialog.dialogid).modal({backdrop:false});}
else{$("#"+$dialog.dialogid).modal({'backdrop':'static','keyboard':true});}
if(options.hidden=='remove'){$("#"+$dialog.dialogid).on('hidden.bs.modal',function(e){$("#"+$dialog.dialogid).remove();});}
if(options.width){$("#"+$dialog.dialogid+' .modal-dialog').width(options.width).css('max-width','100%');}
if(options.zIndex){$("#"+$dialog.dialogid).css('z-index',options.zIndex);}
return false;},load_url:function(url,selector){var $dialog=this;var re=/^#/;if(re.test(url)||url.substr(0,10).toLowerCase()=='javascript'){return false;}
if(selector){url+=' '+selector;}
$("#"+$dialog.dialogid).load(url,function(){$("#"+$dialog.dialogid).find('a').click(function(){$dialog.load_url($(this).attr('href'),{});return false;});page_loaded();});},focus_close:function(){if(this.dialogid){$("#"+this.dialogid).find('.modal-header .close').focus();}},remove:function(){if(this.dialogid){$('.modal-backdrop').remove();$("#"+this.dialogid).remove();}},close_dialog:function(){if(this.dialogid){$("#"+this.dialogid).modal('hide');$('.modal-backdrop').remove();}},open_msg_dialog:function(dialogid,title,content){this.dialogid=dialogid;$("#"+this.dialogid).remove();$('<div  class="modal fade" id="'+dialogid+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+title+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="myModalLabel"></h3></div><div class="modal-body">'+content+'</div></div></div></div>').appendTo("body");$("#"+dialogid).modal('show');$("#"+dialogid).modal({backdrop:false});$("#"+dialogid).on('shown.bs.modal',function(e){$('.modal-dialog',"#"+dialogid).css({'margin-top':($(window).height()-$('.modal-dialog',"#"+dialogid).height())/2})}).on('hidden.bs.modal',function(e){$("#"+dialogid).remove();});},open_html_dialog:function(dialogid,title){this.dialogid=dialogid;if($("#"+this.dialogid).length<1){$('<div  class="modal fade" id="'+this.dialogid+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+title+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="myModalLabel"></h3></div><div class="modal-body"></div></div></div></div>').appendTo("body");}
$("#"+dialogid).modal();},invite_tabs:{}};function inner_open(container_selector,result_selector){$(container_selector).find('a').click(function(){var url=$(this).attr('href');if(result_selector){url=url+' '+result_selector;}
var re=/^#/;if(typeof($(this).attr('onclick'))!="undefined"||$(this).attr("target")=='_blank'||re.test(url)||url.substr(0,10).toLowerCase()=='javascript'){return true;}
$(container_selector).scrollTop(0).prepend('<div style="margin:10px;"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载内容...</div>').load(url,function(){page_loaded();inner_open(container_selector,result_selector);});return false;});}
function follow_wx(id)
{var url=BASEURL+'/user_follows/follow/'+id;sso.callback=follow_wx;sso.callback_args=arguments;publishController.open_dialog(url,{'title':'Follow',width:400});return false;}
function addtofavor(model,id,obj,callback)
{var url=BASEURL+'/favorites/add/';var postdata={'data[Favorite][model]':model,'data[Favorite][data_id]':id};sso.callback=addtofavor;sso.callback_args=arguments;var evt=window.event||arguments.callee.caller.arguments[0];evt.stopPropagation();if(typeof(callback)=='function'){ajaxAction(url,postdata,null,callback);}
else{ajaxAction(url,postdata,null,function(request){if(request.ret==0){if(window.localStorage){localStorage.setItem(model+"_newfavor",id);}
if(obj){$(obj).attr('title','取消收藏').attr('data-original-title','取消收藏').removeClass('text-primary').addClass('text-success');if($(obj).find('.fa-heart-o').length>0){$(obj).find('.fa-heart-o').removeClass('fa-heart-o').addClass('fa-heart');}}
var num_selector='#Stats-'+request.data.model+'-'+request.data.data_id+'-favor_nums';if($(num_selector).length>0){var num=$(num_selector).html();num=num.replace(/\(|\)/g,'');if(num=='')num=0;num=parseInt(num);num++;$(num_selector).html(num);}}
else{showErrorMessage(request.msg);}});}
return false;}
function removefavor(model,id,obj,callback){var evt=window.event||arguments.callee.caller.arguments[0];evt.stopPropagation();var url=BASEURL+'/favorites/cancelByMid/'+model+'/'+id;sso.callback=removefavor;sso.callback_args=arguments;ajaxAction(url,null,null,function(request){if(request.ret==0){if(typeof(callback)=='function'){callback(request);}
$(obj).attr('title','收藏此项').attr('data-original-title','收藏此项');if($(obj).find('.fa-heart').length>0){$(obj).find('.fa-heart').removeClass('fa-heart').addClass('fa-heart-o');}
else{$(obj).parents('li:first').remove();$('.tooltip.show').remove();$('.popover.show').remove();}}});return false;}
function unfavorite(obj,callback){var evt=window.event||arguments.callee.caller.arguments[0];evt.stopPropagation();var url=$(obj).data('url');sso.callback=unfavorite;sso.callback_args=arguments;ajaxAction(url,null,null,function(request){if(request.ret==0){if(typeof(callback)=='function'){callback(request);}
$(obj).attr('disabled','disabled');if($(obj).find('.fa-heart').length>0){$(obj).find('.fa-heart').removeClass('fa-heart').addClass('fa-heart-o');}
else{$(obj).parents('li:first').remove();$('.tooltip.show').remove();$('.popover.show').remove();}}});return false;}
function refreshfavorite(obj){var evt=window.event||arguments.callee.caller.arguments[0];evt.stopPropagation();var url=$(obj).data('url');sso.callback=refreshfavorite;sso.callback_args=arguments;ajaxAction(url,null,null,function(request){if(request.ret==0){$(obj).parents('li:first').prependTo($(obj).parents('ul:first'));showSuccessMessage(request.msg);}});return false;}
function addtoCart(id,num,model)
{if(!model){model='product';}
var url=BASEURL+'/carts/add';var postdata={'data[Cart][num]':num,'data[Cart][product_id]':id,'data[Cart][product_model]':model};sso.callback=addtoCart;sso.callback_args=arguments;ajaxAction(url,postdata,null,'addtoCart');return false;}
function praiseBuy(model,id){var content='<form method="POST" target="_blank" action="/carts/add?redirect=/orders/info">';var prices=[2,4,6,8,10];content+='<div class="btn-group btn-group-lg">';for(var i in prices){if(prices[i]==6){content+='<label class="consignee-item"><div class="consignee-box active" style="height:60px;width:98px;"><input type="radio" checked="checked" name="data[Cart][price]" value="'+prices[i]+'" >'+prices[i]+'元<div class="inok"><img src="/img/common/arrow-red.png" alt=""></div></div></label>&nbsp;';}
else{content+='<label class="consignee-item"><div class="consignee-box" style="height:60px;width:98px;"><input type="radio" name="data[Cart][price]" value="'+prices[i]+'" >'+prices[i]+'元<div class="inok"><img src="/img/common/arrow-red.png" alt=""></div></div></label>&nbsp;';}}
content+='</div>';content+='<input type="hidden" name="data[Cart][num]" value="1">';content+='<input type="hidden" name="data[Cart][product_id]" value="'+id+'">';content+='<input type="hidden" name="data[Cart][product_model]" value="'+model+'">';content+='<p style="text-center"><input class="btn btn-primary" type="submit" value="打赏转载"></p>';content+='</form>';publishController.open_msg_dialog('praise-'+model,'打赏转载',content)}
function directBuy(id,num,model)
{if(!model){model='product';}
var url=BASEURL+'/carts/add';var postdata={'data[Cart][num]':num,'data[Cart][product_id]':id,'data[Cart][product_model]':model};sso.callback=directBuy;sso.callback_args=arguments;ajaxAction(url,postdata,null,function(){location.href=BASEURL+'/orders/info?ck_ids='+id;});return false;}
function loadDiggData()
{var models=[];var ids={};$('.ui-dig-num').each(function(i){var info=this.id.split('-');if($.inArray(info[1],models)<0){models[models.length]=info[1];}
if(!ids[info[1]]){ids[info[1]]=[];}
if($.inArray(info[2],ids[info[1]])<0){var id_length=ids[info[1]].length;ids[info[1]][id_length]=info[2];}});for(var i in models){var model=models[i];var data_id=ids[models];loadModelDataDigg(model,data_id);}}
function loadModelDataDigg(model,data_id)
{$.ajax({type:'get',url:BASEURL+'/appraiseresults/getdigdata',data:{'model':model,'data_id':data_id},success:function(data){for(var i in data){setDiggNum(data[i]['Appraiseresult']);}},dataType:'json'});}
function loadStatsData()
{var models=[];var ids={};$('.ui-stats-num').each(function(i){var s=this.id;var info=s.split('-');if($.inArray(info[1],models)<0){models[models.length]=info[1];}
if(!ids[info[1]]){ids[info[1]]=[];}
if($.inArray(info[2],ids[info[1]])<0){var id_length=ids[info[1]].length;ids[info[1]][id_length]=info[2];}});for(var i in models){var model=models[i];var data_id=ids[model];if(model&&model!=""){loadModelDataStats(model,data_id);}}}
function loadModelDataStats(model,data_id)
{$.ajax({type:'get',url:BASEURL+'/stats_days/getdata',data:{'model':model,'data_id':data_id},success:function(data){for(var i in data){setStatsNum(data[i]['StatsDay']);}},dataType:'json'});}
function setStatsNum(data)
{if(parseInt(data.favor_nums)>0){var id='#Stats-'+data.model+'-'+data.data_id+'-favor_nums';setQuoteNum(id,data.favor_nums);}
if(parseInt(data.comment_nums)>0){var id='#Stats-'+data.model+'-'+data.data_id+'-comment_nums';setQuoteNum(id,data.comment_nums);}
if(parseInt(data.view_nums)>0){var id='#Stats-'+data.model+'-'+data.data_id+'-view_nums';setQuoteNum(id,data.view_nums);}}
function setQuoteNum(select,value){if($(select).length>0){var num=$(select).eq(0).html();num=num.replace(/&nbsp;| /g,'');num=num.replace(/\(|\)/g,'');if(num=='')num=0;num=parseInt(num);num=num+parseInt(value);$(select).html(num);}}
function loadModelDataMood(model,data_id)
{$.ajax({type:'get',url:BASEURL+'/appraiseresults/getdigdata',data:{'model':model,'data_id':data_id},success:function(data){var total=0;for(var i in data){if(data[i]['Appraiseresult'].question_id==3){total+=parseInt(data[i]['Appraiseresult'].value);}}
for(var i in data){setDiggNum(data[i]['Appraiseresult'],total);}},dataType:'json'});}
function loadComments(model,id)
{$.get(BASEURL+'/comments/get_comments_data/'+model+'/'+id,{},function(comments){var current=null;var commentstarget='.comments-'+model+'-'+id;$(commentstarget).html('');for(var i=0;i<comments.length;i++){current=comments[i].Comment;var comment_html='<li><span class="t">'+current.name+'  '+current.created+'</span><p>'+current.body+'</p><li>';$(commentstarget).append(comment_html);}},"json");}
function loadMoodDigg(model,id){$.get(BASEURL+'/appraises/load/3/'+id+'/'+model+'?inajax=1',{},function(MoodData){$('#mood-'+model+'-'+id).html(MoodData);},"html");}
var page_hash={storedHash:'',currentTabHash:'',cache:'',interval:null,listen:true,startListening:function(){setTimeout(function(){page_hash.listen=true;},600);},stopListening:function(){page_hash.listen=false;},checkHashChange:function(){var locStr=page_hash.currHash();if(page_hash.storedHash!=locStr){if(page_hash.listen==true)page_hash.refreshToHash();page_hash.storedHash=locStr;}
if(!page_hash.interval)page_hash.interval=setInterval(page_hash.checkHashChange,500);},refreshToHash:function(locStr){if(locStr)var newHash=true;locStr=locStr||page_hash.currHash();var hash_array=locStr.split('&');for(var i in hash_array){var pageinfo=hash_array[i].split('=');if(pageinfo[0]&&pageinfo[1]&&pageinfo[0].substr(0,5)=='page_'){var portletid=pageinfo[0].replace('page_','');var page=pageinfo[1];$('.page_'+page,'#'+portletid).trigger('click');}}
if(newHash){page_hash.updateHash(locStr,true);}},updateHash:function(locStr,ignore){if(ignore==true){page_hash.stopListening();}
window.location.hash=locStr;if(ignore==true){page_hash.storedHash=locStr;page_hash.startListening();}},clean:function(locStr){return locStr.replace(/%23/g,"").replace(/[\?#]+/g,"");},currHash:function(){return page_hash.clean(window.location.hash);},currSearch:function(){return page_hash.clean(window.location.search);},init:function(){page_hash.storedHash='';page_hash.checkHashChange();}};function Html5Uploadfile(file_id){this.file_input=null;var uploading_id=file_id+randomString(10);this.upload=function(file_input,options){this.file_input=file_input;var file=file_input.files[0];if(file){var fileSize=0;if(file.size>1024*1024)
fileSize=(Math.round(file.size*100/(1024*1024))/100).toString()+'MB';else
fileSize=(Math.round(file.size*100/1024)/100).toString()+'KB';var fd=new FormData();fd.append("file_post_name",options.file_post_name);fd.append("file_model_name",options.file_model_name);fd.append("no_db",options.no_db);fd.append("data_id",options.data_id);fd.append("item_css",options.item_css);fd.append("save_folder",options.save_folder);fd.append("return_type",options.return_type);fd.append(options.file_post_name,file);this.uploading_files[options.file_post_name]={};this.uploading_files[options.file_post_name][file.name]=true;var append_html='<div id="'+uploading_id+'-status" class="uploading-item clearfix"><span class="filename">'+file.name+'</span> <div class="progress float-left" style="width:200px;">'
+'<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:0%">'
+'<span class="sr-only">0%</span>'
+'</div></div> </div>';if(options.container){$(options.container).append(append_html);}
else{$(file_input).after(append_html);}
var xhr=new XMLHttpRequest();xhr.upload.addEventListener("progress",this.uploadProgress,false);if(options.uploadComplete){xhr.addEventListener("load",options.uploadComplete,false);}
else{xhr.addEventListener("load",this.uploadComplete,false);}
xhr.addEventListener("error",this.uploadFailed,false);xhr.addEventListener("abort",this.uploadCanceled,false);xhr.open("POST",options.upload_url);xhr.send(fd);}},this.uploading_files={},this.check_upload=function(){return false;},this.uploadProgress=function(evt){if(evt.lengthComputable){var percentComplete=Math.round(evt.loaded*100/evt.total);$("#"+uploading_id+'-status').find('.progress-bar').css('width',percentComplete.toString()+'%');}
else{alert('Unable to compute.Please retry.');}},this.uploadComplete=function(evt){var data=eval('('+evt.target.responseText+')');$('#fileuploadinfo_'+data.fieldname).append(data.message);$('#'+data.fieldid).val(data.fspath);$("#"+uploading_id+'-status').fadeOut("slow").remove();},this.uploadFailed=function(evt){alert("There was an error attempting to upload the file.");},this.uploadCanceled=function(evt){alert("The upload has been canceled by the user or the browser dropped the connection.");};}
function debug_object(obj){var str='';for(var i in obj){str+=i+'='+obj[i]+";\t";}
$("body").append('<hr/>'+str);}
function getAvatarUrl(uid){return BASEURL+'/files/avatar/'+parseInt(uid/1000%1000)+'/'+parseInt(uid%1000)+'/'+uid+'_0.jpg';}
$(document).ready(function(){var onMessage=function(e){console.log('postMessage:',e);if(typeof e.data!=='string')return;if(e.data.substring(0,12)=='loginSuccess'){var splits=e.data.split("\r\n",2),request=JSON.parse(splits[1]);console.log('loginSuccess',request);rs_callbacks.loginSuccess(request);}}
if(window.addEventListener){window.addEventListener("message",onMessage,false);}else{if(window.attachEvent){window.attachEvent("onmessage",onMessage);}}
$(document).on('click','.consignee-box',function(){$('.consignee-box.active').removeClass('active');$(this).addClass('active');});$(document).on('click','.btn-favorite',function(){var btn=this;if(!sso.check_userlogin({"callback":function(obj){$(obj).trigger('click');},"callback_args":[btn]})){return false;}
if($(this).find('.fa-heart-o').length>0){addtofavor($(this).data('model'),$(this).data('id'),this);}
else{removefavor($(this).data('model'),$(this).data('id'),this);}
return false;});$(document).on('click','.check-all',function(){if(this.checked){$('input:checkbox',this.form).prop('checked',true);}
else{$('input:checkbox',this.form).prop('checked',false);}});$(document).on('click','.invoice-box',function(){$('.invoice-box.active').removeClass('active');$('.invoice-box .invoice-radio').removeAttr('checked');$(this).addClass('active');$(this).find('.invoice-radio').attr('checked','checked');});if($.fn.validate){jQuery.validator.addMethod("biggerThen",function(value,element){var biggerThan=$(element).attr('biggerThen');var type=$(element).data('type');if(type=='string'){return value>$(biggerThan).val();}
else{return parseInt(value)>parseInt($(biggerThan).val());}},"Please check the value is in the right range");$('form').each(function(){validateForm(this);})}
if($('#ajaxestatus').length>0){$(document).ajaxStart(function(){$('#ajaxestatus').show();}).ajaxStop(function(){$('#ajaxestatus').hide();});}
$(document).on('click.bs.collapse.data-api','.collapse-itemmenu > a',function(e){var $this=$(this);e.preventDefault();$this.parents('.collapse-itemmenu:first').toggleClass('open');if($this.find('.glyphicon-plus').length>0){$this.find('.glyphicon-plus').addClass('glyphicon-minus').removeClass('glyphicon-plus');}
else{$this.find('.glyphicon-minus').addClass('glyphicon-plus').removeClass('glyphicon-minus');}});$('.collapse-menu > li.open').each(function(){$(this).find('a:first>.glyphicon-plus').addClass('glyphicon-minus').removeClass('glyphicon-plus');});$(document).on('click','.upload-fileitem .remove',function(){if(!confirm('Are you sure to delete this file.')){return false;}
var $this=$(this);var data_id=$(this).data('id');$.ajax({type:'post',url:BASEURL+'/uploadfiles/delete',data:{id:data_id},success:function(data){if(data.error){alert(data.error);return false;}
else{$this.parents('.upload-fileitem:first').remove();}},dataType:'json'});});setTimeout(function(){getUnreadMsgNum();},3000);});function getUnreadMsgNum(){$.ajax({type:'get',url:BASEURL+'/shortmessages/unread/',success:function(request){var total=request.total;var html='';if(request.Shortmessage){html+='<h3 style="margin:0 0 5px;color: #333;">消息通知</h3><ul>';for(var i in request.Shortmessage){var haveread=request.Shortmessage[i].haveread;html+='<li><a target="_blank" class="shortmessage '+(haveread==1?'readed':'unread')+'" href="'+BASEURL+'/shortmessages/mine?id='+request.Shortmessage[i]['id']+'">'+request.Shortmessage[i]['title']+'</a><p><small>'+request.Shortmessage[i]['created']+'</small></p></li>';}
html+='</ul>';}
if(request.Announcement){html+='<h3 style="margin:5px 0;color: #333;">系统公告</h3><ul>';for(var i in request.Announcement){var url=BASEURL+'/announcements/view/'+request.Announcement[i]['id'];var haveread=request.Announcement[i].haveread;html+='<li><a target="_blank" class="announcement '+(haveread==1?'readed':'unread')+'" data-id="'+request.Announcement[i]['id']+'" href="'+url+'">'+request.Announcement[i]['name']+'</a><p><small>'+request.Announcement[i]['created']+'</small></p></li>';}
html+='</ul>';}
if(total>0){$('.user-unread-msgnum').html(total).show();$('.user-unread-msgnum').parents('li.dropdown').addClass('show');$('#user-unreadmsg-list,.user-unreadmsg-list').html(html).addClass('show');setTimeout(function(){$('#user-unreadmsg-list').removeClass('show');},15000);}
else{if(html!=''){$('#user-unreadmsg-list,.user-unreadmsg-list').html(html).removeClass('show');}
else{$('#user-unreadmsg-list,.user-unreadmsg-list').hide();}}},dataType:'json'});}
var stack_custom={"dir1":"right","dir2":"down"};function validateForm(form){if(typeof($(form).attr('onsubmit'))!='undefined'||typeof($(form).data('noajax'))!='undefined'||typeof($(form).attr("target"))!='undefined'||$(form).attr('method')=='get'||$(form).attr('method')=='GET'){return true;}
var validator=$(form).validate({errorElement:'span',errorClass:'help-block',focusInvalid:true,highlight:function(element){$(element).closest('.form-group').addClass('has-error');},success:function(label){label.closest('.form-group').removeClass('has-error');label.remove();},messages:{'required':'这项为必填'},errorPlacement:function(error,element){element.parents('div:first').append(error);},submitHandler:function(form){if($(form).validate().form()){if(typeof($(form).data('noajax'))!='undefined'||typeof($(form).attr("target"))!='undefined'||$(form).attr('method')=='get'||$(form).attr('method')=='GET'){return true;}
else{var callback=$(form).data('submitCallback');if(typeof(callback)=='function'){ajaxSubmitForm(form,callback);}
else{ajaxSubmitForm(form);}}}}});return validator;}
function randomString(len){len=len||8;var $chars='ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';var maxPos=$chars.length;var pwd='';for(i=0;i<len;i++){pwd+=$chars.charAt(Math.floor(Math.random()*maxPos));}
return pwd;}
function strtolower(str){return(str+'').toLowerCase();}
function substr(str,start,len){var i=0,allBMP=true,es=0,el=0,se=0,ret='';str+='';var end=str.length;this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};switch((this.php_js.ini['unicode.semantics']&&this.php_js.ini['unicode.semantics'].local_value.toLowerCase())){case'on':for(i=0;i<str.length;i++){if(/[\uD800-\uDBFF]/.test(str.charAt(i))&&/[\uDC00-\uDFFF]/.test(str.charAt(i+1))){allBMP=false;break;}}
if(!allBMP){if(start<0){for(i=end-1,es=(start+=end);i>=es;i--){if(/[\uDC00-\uDFFF]/.test(str.charAt(i))&&/[\uD800-\uDBFF]/.test(str.charAt(i-1))){start--;es--;}}}else{var surrogatePairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;while((surrogatePairs.exec(str))!=null){var li=surrogatePairs.lastIndex;if(li-2<start){start++;}else{break;}}}
if(start>=end||start<0){return false;}
if(len<0){for(i=end-1,el=(end+=len);i>=el;i--){if(/[\uDC00-\uDFFF]/.test(str.charAt(i))&&/[\uD800-\uDBFF]/.test(str.charAt(i-1))){end--;el--;}}
if(start>end){return false;}
return str.slice(start,end);}else{se=start+len;for(i=start;i<se;i++){ret+=str.charAt(i);if(/[\uD800-\uDBFF]/.test(str.charAt(i))&&/[\uDC00-\uDFFF]/.test(str.charAt(i+1))){se++;}}
return ret;}
break;}
case'off':default:if(start<0){start+=end;}
end=typeof len==='undefined'?end:(len<0?len+end:len+start);return start>=str.length||start<0||start>end?!1:str.slice(start,end);}
return undefined;};

var message_positon='bottom-right';var setAmount={min:0,max:9999,reg:function(x){return new RegExp("^[1-9]\\d*$").test(x);},amount:function(obj,mode){var x=$(obj).val();if(this.reg(x)||x==0){if(mode){x++;}else{x--;}}else{alert("请输入正确的数量！");$(obj).val(this.min);$(obj).focus();}
return x;},reduce:function(obj){var x=this.amount(obj,false);if(x>=this.min){$(obj).val(x);}else{alert("商品数量最少为"+this.min);$(obj).val(this.min);$(obj).focus();}},add:function(obj){var x=this.amount(obj,true);if(x<=this.max){$(obj).val(x);}else{alert("商品数量最多为"+this.max);$(obj).val(this.max);$(obj).focus();}},modify:function(obj){var x=$(obj).val();if(x<this.min||x>this.max||!this.reg(x)){alert("请输入正确的数量！");$(obj).val(this.min);$(obj).focus();}}};function loadUserCateOptions(selector,model){ajaxAction('/user_cates/getUserCates/'+model,null,null,function(request){var options='';if(request['']){options='<option>'+request['']+'</option>';}
for(var i in request){if(i!=""){options=options+'<option value="'+i+'">'+request[i]+'</option>';}}
$(selector).empty().append(options);showSuccessMessage('分类数据加载成功');});}
function showHtmlMessage(id,title,content)
{publishController.open_msg_dialog(id,title,content);return true;}
function showSuccessMessage(text,position,life)
{if(position==null||typeof(position)=='undefined'){position=message_positon;}
if(!life){life=4000;}
if($.fn.jGrowl){$('#jGrowl').find('.jGrowl-notification').trigger('jGrowl.close');$.jGrowl("<i style='margin-right:10px;' class='fa fa-check'></i> "+text,{theme:'alert alert-success',life:life,closer:true,closeTemplate:'&times;',closerTemplate:'',themeState:'',position:position});}
else{alert(text);}
return true;}
function showErrorMessage(text,position,life)
{if(position==null||typeof(position)=='undefined'){position=message_positon;}
if(!life){life=5000;}
if($.fn.jGrowl){$('#jGrowl').find('.jGrowl-notification').trigger('jGrowl.close');$.jGrowl("<i class='fa fa-warning'></i> "+text,{theme:'alert alert-danger',position:position,closer:true,closeTemplate:'&times;',closerTemplate:'',life:life,themeState:''});}
else{alert(text);}
return true;}
function page_loaded()
{$('.ui-portlet-content').each(function(){if(jQuery.trim($(this).html())==''){$(this).parent('.ui-portlet').hide();}});$('[data-toggle="tooltip"],.showtooltip').tooltip({container:'body',html:true});$('[data-toggle="popover"]').popover({html:true,placement:'right'});$('.popover-trigger').popover({trigger:"hover"});$('.delete-pop').popover({trigger:'click',container:'body',placement:'top',template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3>'
+'<div class="popover-content">确定删除此内容吗？ </div>'+' <div class="popover_bar text-center" style="margin-bottom:10px;"><a href="javascript:;" class="btn btn-primary btn-sm pop-comfirm">确定</a>&nbsp;<a href="javascript:;" class="btn btn-default btn-sm pop-cancel">取消</a></div>'
+'</div>',html:true,}).unbind('shown.bs.popover').on('shown.bs.popover',function(){var $this=$(this);$this.trigger('blur');var pop=null;if(typeof($this.data('bs.popover').tip)=='object'){pop=$($this.data('bs.popover').tip);}
else if(typeof($this.data('bs.popover').tip)=='function'){pop=$this.data('bs.popover').tip();}
else{pop=$('#'+$this.attr('aria-describedby'));}
if(pop){$(pop).find('.pop-cancel').unbind('click').click(function(){$this.popover('hide');});$(pop).find('.pop-comfirm').unbind('click').click(function(){$this.popover('hide');ajaxAction($this.data('url'),null,null,function(request){if(request.success||request.ret==0)
{$this.parents('.appmsg:first').remove();}
else{showErrorMessage(request.msg);}});});}});}
$(document).ready(function(){page_loaded();});function detectCapsLock(e,obj){var valueCapsLock=e.keyCode?e.keyCode:e.which;var valueShift=e.shiftKey?e.shiftKey:(valueCapsLock==16?true:false);obj.className=(valueCapsLock>=65&&valueCapsLock<=90&&!valueShift||valueCapsLock>=97&&valueCapsLock<=122&&valueShift)?'form-control clck txt':'form-control txt';$(obj).blur(function(){$(this).className='form-control txt';});}
function showValidateErrors(request,model,suffix)
{var tempmodel=model;var field_name='';var error_message='';var firsterror=true;for(var i in request)
{tempmodel=model;field_name=i;var split_str=i.split('.');if(split_str.length>1)
{tempmodel=split_str[0];field_name=split_str[1];}
var field=field_name.replace(/\b\w+\b/g,function(word){return word.substring(0,1).toUpperCase()+
word.substring(1);});field=field.replace(/\_\w/g,function(word){return word.substring(1,2).toUpperCase();});if(firsterror)
{window.location.hash='#'+tempmodel+field+suffix;firsterror=false;}
$("#error_"+tempmodel+field+suffix).remove();$('#'+tempmodel+field+suffix).parent('div:first').append("<span id='error_"+tempmodel+field+suffix+"' name='error_"+tempmodel+field+suffix+"' class='ui-state-error ui-corner-all' style='position: absolute;'><span class='ui-icon ui-icon-alert'></span>"+request[i]+"</span>");var txt=$('label[for="'+tempmodel+field+suffix+'"]').html();error_message+=txt+':'+request[i]+"<br/>";}
if(error_message!='')
{show_message(error_message,8);}}
function addNewCrawlRegular()
{var field=$('.model-schema-list').val();$('.model-schema-area').before($('<div class="regexp-add"><label for="CrawlRegexp'+field+'">Regexp '+field+'</label><textarea id="CrawlRegexp'+field+'" cols="60" rows="2" name="data[Crawl][regexp_'+field+']"></textarea></div>'));}
var AjaxHelper={dialog_open:false,open_help:function(){$('#ajax_doing_help').html('<img src="/img/ajax/circle_ball.gif" /> 正在提交...');$('#ajax_doing_help').dialog({width:650,close:function(event,ui){$('#invite-user-html').hide().appendTo('body');}});this.dialog_open=true;},has_init_tab:false,friends_tab:null};function showAlert(info,obj,infoSign)
{if($('#'+infoSign).length>0){return;}
var newd=document.createElement("span");newd.id=infoSign;newd.className='ui-state-error';newd.innerHTML=info;$(obj).append($(newd));}
function removeAlert(infoSign)
{$(infoSign).remove();}
function clearSubmitError(obj){$(obj).parent().find('.errorInfo').remove();}
function clearWaitInfo(obj){if(obj){$(obj).parent().find('.waitInfo').remove();}
else{$(".waitInfo").remove();}}
function showWaitInfo(info,obj){try{if(obj==null)return;clearWaitInfo();var newd=document.createElement("span");newd.className='waitInfo';newd.id='waitInfo';newd.innerHTML=info;obj.parentNode.appendChild(newd);}catch(e){}}
function showWaitInfoOnInner(info,obj){try{if(obj==null)return;clearWaitInfo();var newd=document.createElement("span");newd.className='waitInfo';newd.id='waitInfo';newd.innerHTML=info;obj.innerHTML='';obj.appendChild(newd);}catch(e){}}
function upload_multi_file(file,serverData){try{var progress=progress_list[file.id];progress.setComplete();if(serverData===" "){this.customSettings.upload_successful=false;}else{var data=eval("("+serverData+")");if(data.status==1){this.customSettings.upload_successful=true;var filesize='';if(data.size/1024/1024>1){filesize=Math.round(data.size/1024/1024*100)/100+'MB';}
else if(data.size/1024>1){filesize=Math.round(data.size/1024*100)/100+'KB';}
else{filesize=data.size+'B';}
$("#fileuploadinfo_"+data.fieldname+"_"+data.data_id).append('<div class="col-md-4  upload-fileitem">'+' <a target="_blank" href="'+BASEURL+'/uploadfiles/download/'+data.id+'" class="btn btn-success "><i class="glyphicon glyphicon-cloud-download"></i><div>'+data.name+'</div><small>File Size: '+filesize+'</small></a>'+'<i class="glyphicon glyphicon-remove remove" data-id="'+data.data_id+'" title="Remove"></i>'+'</div>');}}}catch(e){alert(serverData);}}
$(function(){$('.ui-navi li').hover(function(){$(this).children(".ui-drop-menu:first").show();},function(){$(this).children(".ui-drop-menu:first").hide();});$('.nav .dropdown,.navbar-nav .dropdown,header .dropdown').hover(function(e){$(this).addClass('show');$(this).find('.dropdown-menu').addClass('show');},function(){$(this).removeClass('show');$(this).find('.dropdown-menu').removeClass('show');}).click(function(e){e.stopPropagation();});$(document).on('click','[data-toggle="tab"]',function(){var target=$(this).attr('href');var inner_selector=$(this).data('selector');if($(target).html()==""||$(this).data('refresh')=="always"){if($(this).data('url')){$(target).html('<img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载...');$(target).load($(this).data('url'),function(){tab_loaded();function tab_loaded(){$(target+" img").lazyload({effect:"fadeIn",container:target,data_attribute:'src',threshold:50,failure_limit:50});page_loaded();$(target).find('a').click(function(){var url=$(this).attr('href');if(url.search(/\?/)!=-1){url+='&inajax=1';}
else{url+='?inajax=1';}
if($(this).attr('id')=='btn-search-image'){if($(this).data('input')){url+='&name='+encodeURI($($(this).data('input'),target).val());}
else{url+='&name='+encodeURI($('#SearchImageName',target).val());}}
if(inner_selector){url=url+' '+inner_selector;}
var re=/^#/;if(typeof($(this).attr('onclick'))!="undefined"||$(this).attr('target')=='_blank'||typeof(url)=="undefined"||re.test(url)||url.substr(0,10).toLowerCase()=='javascript'){return true;}
var inner_target=target;if($(this).data('target')){inner_target+=" "+$(this).data('target');}
console.log(inner_target);$(inner_target).load(url,function(){tab_loaded();});return false;});$(target).find('form').submit(function(){var url=$(this).attr('action');var re=/^#/;if($(this).attr('method')!="get"||typeof(url)=="undefined"){return true;}
if(url.search(/\?/)!=-1){url+='&inajax=1&'+$(this).serialize();}
else{url+='?inajax=1&'+$(this).serialize();}
$(target).load(url,function(){tab_loaded();});return false;});$(target).scrollTop(0).trigger('scroll');}});}}});$(".ui-sidemenu li").hover(function(){var li_width=$(this).width();var li_offset=$(this).offset();$(this).children("a").addClass("ui-state-default");var submenu=$(this).children(".ui-secondmenu");if(li_offset.left>$(window).width()/2){submenu.css('left',-submenu.width()+2).show();}
else{submenu.css('left',li_width-2).show();}
var offset=submenu.offset();if(li_offset.top-$(window).scrollTop()+submenu.height()>$(window).height()){if(submenu.height()<$(window).height()){submenu.css('top',$(window).height()-2-li_offset.top-submenu.height()+$(window).scrollTop());}
else{submenu.css('top',-li_offset.top+$(window).scrollTop()+2);}}},function(){$(this).children("a").removeClass("ui-state-default");$(".ui-secondmenu",this).hide();});});function WxMsgCoverimgUploaded(data){if($('#WxMsgThumbMediaId').length>0){if(data.media_id){$('#WxMsgThumbMediaId').val(data.media_id);}
else{$('#WxMsgThumbMediaId').val('');}}}
rs_callbacks.deleteConsignee=function(request){$('#consignee-'+request.id).parents('.consignee-item').remove();}
function DelAddress(id){var evt=window.event||arguments.callee.caller.arguments[0];evt.stopPropagation();if(confirm($.jslanguage.sure_delete)){ajaxAction(BASEURL+"/orders/delete_consignee/"+id,null,null,'deleteConsignee');}
return false;}
rs_callbacks.defaultConsignee=function(request){$('.consignee-box').removeClass('bg-success');$('#consignee-'+request.id).addClass('bg-success');}
function SetDefaultAddress(id){var evt=window.event||arguments.callee.caller.arguments[0];evt.stopPropagation();ajaxAction(BASEURL+"/orders/default_consignee/"+id,null,null,'defaultConsignee');return true;}
rs_callbacks.editConsignee=function(request){if(request.ret==0){publishController.close_dialog();if($('#part_consignee').parents('.modal-dialog').length>0){$('body').addClass('modal-open');}
var dom_id='#consignee-'+request.data.id;if($(dom_id).length>0){$(dom_id).html($(request.data.content).find(dom_id).html());}
else
{var consignee=$('<div>'+request.data.content+'</div>').find('.consignee-item:first');consignee.prependTo('#part_consignee');$(dom_id).trigger('click');}}
else{showErrorMessage(request.msg);}}
$(function(){$('#show-more-address').click(function(){if($(this).find('.fa-chevron-down').length>0){$('#part_consignee').addClass('show-more');$('.consignee-item').removeClass('hidden');$(this).html('<i class="fa fa-chevron-up"></i>隐藏</a>');}
else{$('#part_consignee').removeClass('show-more');$('.consignee-item').each(function(i){if(i>3){$(this).addClass('hidden');}});$(this).html('<i class="fa fa-chevron-down"></i>更多地址</a>');}});})
function check_telephone()
{removeAlert('#phone_ff');var pNode=$('#consignee_telephone').parent();var myReg=/(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/;if($('#consignee_telephone').val()!=''&&!myReg.test($('#consignee_telephone').val())){showAlert('固定电话格式不正确',pNode,'phone_ff');return false;}
if($('#consignee_telephone').val()!=''&&$('#consignee_telephone').val().length>20){showAlert('固定电话格式不正确',pNode,'phone_ff');return false;}
return true;}
function check_mobile()
{removeAlert('#mobile_ff');if($('#consignee_mobilephone').val()!=''){var pNode=$('#consignee_mobilephone').parent();var myReg=/(^\s*)(((\(\d{3}\))|(\d{3}\-))?13\d{9}|1\d{10})(\s*$)/;if(!myReg.test($('#consignee_mobilephone').val())){showAlert('手机号格式不正确',pNode,'mobile_ff');return false;}}
return true;}
function check_email()
{var iSign='email';removeAlert('#'+iSign+'_ff');if($('#consignee_'+iSign).val()!=''){var pNode=$('#consignee_'+iSign).parent();var myReg=/(^\s*)\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*(\s*$)/;if(!myReg.test($('#consignee_'+iSign).val())){showAlert('电子邮件格式不正确',pNode,iSign+'_ff');return false;}}
return true;}
function check_postcode()
{removeAlert('postcode_ff');if($('#consignee_postcode').val()!=''){var pNode=$('#consignee_postcode').parent();var myReg=/(^\s*)\d{6}(\s*$)/;if(!myReg.test($('#consignee_postcode').val())){showAlert('邮编格式不正确',pNode,'postcode_ff');return false;}}
return true;}
(function($){$.fn.UItoTop=function(options){var defaults={text:'',min:200,inDelay:600,outDelay:400,containerID:'toTop',containerHoverID:'toTopHover',scrollSpeed:1200,easingType:'linear'},settings=$.extend(defaults,options),containerIDhash='#'+settings.containerID,containerHoverIDHash='#'+settings.containerHoverID;$('body').append('<a href="#" id="'+settings.containerID+'">'+settings.text+'</a>');$(containerIDhash).hide().on('click.UItoTop',function(){$('html, body').animate({scrollTop:0},settings.scrollSpeed,settings.easingType);$('#'+settings.containerHoverID,this).stop().animate({'opacity':0},settings.inDelay,settings.easingType);return false;}).prepend('<span id="'+settings.containerHoverID+'"></span>').hover(function(){$(containerHoverIDHash,this).stop().animate({'opacity':1},600,'linear');},function(){$(containerHoverIDHash,this).stop().animate({'opacity':0},700,'linear');});$(window).scroll(function(){var sd=$(window).scrollTop();if(typeof document.body.style.maxHeight==="undefined"){$(containerIDhash).css({'position':'absolute','top':sd+$(window).height()-50});}
if(sd>settings.min)
$(containerIDhash).fadeIn(settings.inDelay);else
$(containerIDhash).fadeOut(settings.Outdelay);});};})(jQuery);$(function(){$().UItoTop({easingType:'easeOutQuart'});});;

!function(d,y,k,j){function s(a,b){var c=Math.max(0,a[0]-b[0],b[0]-a[1]),e=Math.max(0,a[2]-b[1],b[1]-a[3]);return c+e}function t(a,b,c,e){for(var h=a.length,e=e?"offset":"position",c=c||0;h--;){var f=a[h].el?a[h].el:d(a[h]),i=f[e]();i.left+=parseInt(f.css("margin-left"),10);i.top+=parseInt(f.css("margin-top"),10);b[h]=[i.left-c,i.left+f.outerWidth()+c,i.top-c,i.top+f.outerHeight()+c]}}function m(a,b){var c=b.offset();return{left:a.left-c.left,top:a.top-c.top}}function u(a,b,c){for(var b=[b.left,b.top],c=c&&[c.left,c.top],e,h=a.length,d=[];h--;)e=a[h],d[h]=[h,s(e,b),c&&s(e,c)];return d=d.sort(function(a,b){return b[1]-a[1]||b[2]-a[2]||b[0]-a[0]})}function n(a){this.options=d.extend({},l,a);this.containers=[];this.options.rootGroup||(this.scrollProxy=d.proxy(this.scroll,this),this.dragProxy=d.proxy(this.drag,this),this.dropProxy=d.proxy(this.drop,this),this.placeholder=d(this.options.placeholder),a.isValidTarget||(this.options.isValidTarget=j))}function q(a,b){this.el=a;this.options=d.extend({},w,b);this.group=n.get(this.options);this.rootGroup=this.options.rootGroup||this.group;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var c=this.rootGroup.options.itemPath;this.target=c?this.el.find(c):this.el;this.target.on(o.start,this.handle,d.proxy(this.dragInit,this));this.options.drop&&this.group.containers.push(this)}var o,w={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},l={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(a,b){a.css(b)},onDragStart:function(a){a.css({height:a.height(),width:a.width()});a.addClass("dragged");d("body").addClass("dragging")},onDrop:function(a){a.removeClass("dragged").removeAttr("style");d("body").removeClass("dragging")},onMousedown:function(a,b,c){if(!c.target.nodeName.match(/^(input|select)$/i))return c.preventDefault(),!0},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(a,b,c){a=d.extend({},a.data());if(c)return[b];b[0]&&(a.children=b);delete a.subContainers;delete a.sortable;return a},tolerance:0},p={},v=0,x={left:0,top:0,bottom:0,right:0};o={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"};n.get=function(a){p[a.group]||(a.group===j&&(a.group=v++),p[a.group]=new n(a));return p[a.group]};n.prototype={dragInit:function(a,b){this.$document=d(b.el[0].ownerDocument);this.item=d(a.target).closest(this.options.itemSelector);this.itemContainer=b;!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,l.onMousedown,a)&&(this.setPointer(a),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(a){if(!this.dragging){if(!this.distanceMet(a)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,l.onDragStart,a);this.item.before(this.placeholder);this.dragging=!0}this.setPointer(a);this.options.onDrag(this.item,m(this.pointer,this.item.offsetParent()),l.onDrag,a);var b=a.pageX||a.originalEvent.pageX,a=a.pageY||a.originalEvent.pageY,c=this.sameResultBox,e=this.options.tolerance;if(!c||c.top-e>a||c.bottom+e<a||c.left-e>b||c.right+e<b)this.searchValidTarget()||this.placeholder.detach()},drop:function(a){this.toggleListeners("off");this.dragInitDone=!1;if(this.dragging){if(this.placeholder.closest("html")[0])this.placeholder.before(this.item).detach();else this.options.onCancel(this.item,this.itemContainer,l.onCancel,a);this.options.onDrop(this.item,this.getContainer(this.item),l.onDrop,a);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=j;this.dragging=!1}},searchValidTarget:function(a,b){a||(a=this.relativePointer||this.pointer,b=this.lastRelativePointer||this.lastPointer);for(var c=u(this.getContainerDimensions(),a,b),e=c.length;e--;){var d=c[e][0];if(!c[e][1]||this.options.pullPlaceholder)if(d=this.containers[d],!d.disabled){if(!this.$getOffsetParent())var f=d.getItemOffsetParent(),a=m(a,f),b=m(b,f);if(d.searchValidTarget(a,b))return!0}}this.sameResultBox&&(this.sameResultBox=j)},movePlaceholder:function(a,b,c,e){var d=this.lastAppendedItem;if(e||!(d&&d[0]===b[0]))b[c](this.placeholder),this.lastAppendedItem=b,this.sameResultBox=e,this.options.afterMove(this.placeholder,a,b)},getContainerDimensions:function(){this.containerDimensions||t(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent());return this.containerDimensions},getContainer:function(a){return a.closest(this.options.containerSelector).data(k)},$getOffsetParent:function(){if(this.offsetParent===j){var a=this.containers.length-1,b=this.containers[a].getItemOffsetParent();if(!this.options.rootGroup)for(;a--;)if(b[0]!=this.containers[a].getItemOffsetParent()[0]){b=!1;break}this.offsetParent=b}return this.offsetParent},setPointer:function(a){a=this.getPointer(a);if(this.$getOffsetParent()){var b=m(a,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=b}this.lastPointer=this.pointer;this.pointer=a},distanceMet:function(a){a=this.getPointer(a);return Math.max(Math.abs(this.pointer.left-a.left),Math.abs(this.pointer.top-a.top))>=this.options.distance},getPointer:function(a){return{left:a.pageX||a.originalEvent.pageX,top:a.pageY||a.originalEvent.pageY}},setupDelayTimer:function(){var a=this;this.delayMet=!this.options.delay;this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){a.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(a){var b=this;d.each(["drag","drop","scroll"],function(c,e){b.$document[a](o[e],b[e+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=j},clearDimensions:function(){this.traverse(function(a){a._clearDimensions()})},traverse:function(a){a(this);for(var b=this.containers.length;b--;)this.containers[b].traverse(a)},_clearDimensions:function(){this.containerDimensions=j},_destroy:function(){p[this.options.group]=j}};q.prototype={dragInit:function(a){var b=this.rootGroup;!this.disabled&&!b.dragInitDone&&this.options.drag&&this.isValidDrag(a)&&b.dragInit(a,this)},isValidDrag:function(a){return 1==a.which||"touchstart"==a.type&&1==a.originalEvent.touches.length},searchValidTarget:function(a,b){var c=u(this.getItemDimensions(),a,b),e=c.length,d=this.rootGroup,f=!d.options.isValidTarget||d.options.isValidTarget(d.item,this);if(!e&&f)return d.movePlaceholder(this,this.target,"append"),!0;for(;e--;)if(d=c[e][0],!c[e][1]&&this.hasChildGroup(d)){if(this.getContainerGroup(d).searchValidTarget(a,b))return!0}else if(f)return this.movePlaceholder(d,a),!0},movePlaceholder:function(a,b){var c=d(this.items[a]),e=this.itemDimensions[a],h="after",f=c.outerWidth(),i=c.outerHeight(),g=c.offset(),g={left:g.left,right:g.left+f,top:g.top,bottom:g.top+i};this.options.vertical?b.top<=(e[2]+e[3])/2?(h="before",g.bottom-=i/2):g.top+=i/2:b.left<=(e[0]+e[1])/2?(h="before",g.right-=f/2):g.left+=f/2;this.hasChildGroup(a)&&(g=x);this.rootGroup.movePlaceholder(this,c,h,g)},getItemDimensions:function(){this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(.placeholder, .dragged)").get(),t(this.items,this.itemDimensions=[],this.options.tolerance));return this.itemDimensions},getItemOffsetParent:function(){var a=this.el;return"relative"===a.css("position")||"absolute"===a.css("position")||"fixed"===a.css("position")?a:a.offsetParent()},hasChildGroup:function(a){return this.options.nested&&this.getContainerGroup(a)},getContainerGroup:function(a){var b=d.data(this.items[a],"subContainers");if(b===j){var c=this.$getChildren(this.items[a],"container"),b=!1;c[0]&&(b=d.extend({},this.options,{rootGroup:this.rootGroup,group:v++}),b=c[k](b).data(k).group);d.data(this.items[a],"subContainers",b)}return b},$getChildren:function(a,b){var c=this.rootGroup.options,e=c[b+"Path"],c=c[b+"Selector"],a=d(a);e&&(a=a.find(e));return a.children(c)},_serialize:function(a,b){var c=this,e=this.$getChildren(a,b?"item":"container").not(this.options.exclude).map(function(){return c._serialize(d(this),!b)}).get();return this.rootGroup.options.serialize(a,e,b)},traverse:function(a){d.each(this.items||[],function(){var b=d.data(this,"subContainers");b&&b.traverse(a)});a(this)},_clearDimensions:function(){this.itemDimensions=j},_destroy:function(){var a=this;this.target.off(o.start,this.handle);this.el.removeData(k);this.options.drop&&(this.group.containers=d.grep(this.group.containers,function(b){return b!=a}));d.each(this.items||[],function(){d.removeData(this,"subContainers")})}};var r={enable:function(){this.traverse(function(a){a.disabled=!1})},disable:function(){this.traverse(function(a){a.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(a){a._clearDimensions()})},destroy:function(){this.traverse(function(a){a._destroy()})}};d.extend(q.prototype,r);d.fn[k]=function(a){var b=Array.prototype.slice.call(arguments,1);return this.map(function(){var c=d(this),e=c.data(k);if(e&&r[a])return r[a].apply(e,b)||this;!e&&(a===j||"object"===typeof a)&&c.data(k,new q(c,a));return this})}}(jQuery,window,"sortable");;

(function($,window,document,undefined){var $window=$(window);$.fn.lazyload=function(options){var elements=this;var $container;var settings={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:true,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function update(){var counter=0;elements.each(function(){var $this=$(this);if(settings.skip_invisible&&!$this.is(":visible")){return;}
if($.abovethetop(this,settings)||$.leftofbegin(this,settings)){}else if(!$.belowthefold(this,settings)&&!$.rightoffold(this,settings)){$this.trigger("appear");counter=0;}else{if(++counter>settings.failure_limit){return false;}}});}
if(options){if(undefined!==options.failurelimit){options.failure_limit=options.failurelimit;delete options.failurelimit;}
if(undefined!==options.effectspeed){options.effect_speed=options.effectspeed;delete options.effectspeed;}
$.extend(settings,options);}
$container=(settings.container===undefined||settings.container===window)?$window:$(settings.container);if(0===settings.event.indexOf("scroll")){$container.bind(settings.event,function(){return update();});}
this.each(function(){var self=this;var $self=$(self);self.loaded=false;if($self.attr("src")===undefined||$self.attr("src")===false){if($self.is("img")){$self.attr("src",settings.placeholder);}}
$self.one("appear",function(){if(!this.loaded){if(settings.appear){var elements_left=elements.length;settings.appear.call(self,elements_left,settings);}
$("<img />").bind("load",function(){var original=$self.attr("data-"+settings.data_attribute);$self.hide();if($self.is("img")){$self.attr("src",original);}else{$self.css("background-image","url('"+original+"')");}
$self[settings.effect](settings.effect_speed);self.loaded=true;var temp=$.grep(elements,function(element){return!element.loaded;});elements=$(temp);if(settings.load){var elements_left=elements.length;settings.load.call(self,elements_left,settings);}}).attr("src",$self.attr("data-"+settings.data_attribute));}});if(0!==settings.event.indexOf("scroll")){$self.bind(settings.event,function(){if(!self.loaded){$self.trigger("appear");}});}});$window.bind("resize",function(){update();});if((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)){$window.bind("pageshow",function(event){if(event.originalEvent&&event.originalEvent.persisted){elements.each(function(){$(this).trigger("appear");});}});}
$(document).ready(function(){update();});return this;};$.belowthefold=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=(window.innerHeight?window.innerHeight:$window.height())+$window.scrollTop();return fold<=$(element).offset().top-settings.threshold;}else{fold=$(settings.container).offset().top+$(settings.container).height();return fold<=$(element).offset().top-settings.threshold;}};$.rightoffold=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.width()+$window.scrollLeft();return fold<=$(element).offset().left-settings.threshold;}else{fold=$(settings.container).offset().left+$(settings.container).width();return fold<=$(element).offset().left-settings.threshold;}};$.abovethetop=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.scrollTop();}else{fold=$(settings.container).offset().top;}
return fold>=$(element).offset().top+settings.threshold+$(element).height();};$.leftofbegin=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.scrollLeft();}else{fold=$(settings.container).offset().left;}
return fold>=$(element).offset().left+settings.threshold+$(element).width();};$.inviewport=function(element,settings){return!$.rightoffold(element,settings)&&!$.leftofbegin(element,settings)&&!$.belowthefold(element,settings)&&!$.abovethetop(element,settings);};$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0});},"above-the-top":function(a){return!$.belowthefold(a,{threshold:0});},"right-of-screen":function(a){return $.rightoffold(a,{threshold:0});},"left-of-screen":function(a){return!$.rightoffold(a,{threshold:0});},"in-viewport":function(a){return $.inviewport(a,{threshold:0});},"above-the-fold":function(a){return!$.belowthefold(a,{threshold:0});},"right-of-fold":function(a){return $.rightoffold(a,{threshold:0});},"left-of-fold":function(a){return!$.rightoffold(a,{threshold:0});}});})(jQuery,window,document);